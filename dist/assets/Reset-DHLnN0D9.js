import{u as j,b as x,c as N,d as q,a as R,h as v,r as S,j as e,B as E,e as o,bK as T}from"./index-CV0oviIo.js";import{u as B}from"./index.esm-D43XoWsD.js";import{P as C}from"./PasswordStrength-BdMMbWEw.js";import{T as l}from"./Textbox-vtj0IqUG.js";const D=()=>{const h=j(),n=x(N),m=x(q),d=R(),{register:r,handleSubmit:g,watch:b,setValue:u}=B(),P=b("newPassword",""),i=v(),y=a=>{if(a.newPassword!==a.confirmPassword){o.error("Passwords do not match");return}const t={email:a.email,otp:a.otp,newPassword:a.newPassword};h(T(t)).then(s=>{var w,p,f;if(s.type&&s.type.endsWith("fulfilled")){const c=((w=s.payload)==null?void 0:w.message)||((p=s.payload)==null?void 0:p.msg)||"Password reset successful. Please log in.";o.success(c),d("/log-in")}else{const c=((f=s.payload)==null?void 0:f.message)||s.payload||s.error||"Reset failed";o.error(c)}}).catch(s=>{o.error((s==null?void 0:s.message)||"Reset failed")})};return S.useEffect(()=>{var a;try{const t=new URLSearchParams(i.search).get("email")||((a=i.state)==null?void 0:a.email);t&&u("email",t)}catch{}},[i,u]),e.jsx("div",{className:"w-full min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow-lg",children:[e.jsx("button",{type:"button",onClick:()=>d(-1),className:"mb-4 text-gray-600 hover:text-gray-800 flex items-center gap-1",children:"‚Üê Back"}),e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Reset Password"}),e.jsxs("form",{onSubmit:g(y),className:"flex flex-col gap-5",children:[e.jsx(l,{label:"Email",name:"email",placeholder:"email@example.com",register:r("email",{required:"Email required"}),className:"w-full"}),e.jsx(l,{label:"OTP",name:"otp",placeholder:"123456",register:r("otp",{required:"OTP required"}),className:"w-full"}),e.jsx(l,{label:"New Password",name:"newPassword",type:"password",register:r("newPassword",{required:"Password required",minLength:{value:6,message:"Minimum 6 characters"}}),className:"w-full"}),e.jsx(C,{password:P}),e.jsx(l,{label:"Confirm Password",name:"confirmPassword",type:"password",register:r("confirmPassword",{required:"Confirm password required"}),className:"w-full"}),n==="failed"&&m&&e.jsx("p",{className:"text-red-500 text-sm",children:m}),e.jsx(E,{type:"submit",label:n==="loading"?"Resetting...":"Reset Password",className:"bg-blue-600 hover:bg-blue-700 text-white rounded-md w-full py-3"})]})]})})};export{D as default};
