import{r as d,o as Ee,n as M,p as g,w as $e,U as _,y as A,q as B,bT as Fe,bU as Me,bV as _e,bW as z,R as G,bX as Ae,bY as q,l as at,bZ as it,m as lt,C as U,I as H,b_ as V,b$ as Ue,x as v,c0 as ke,T as Be,O as ae,t as qe,c1 as Qe,c2 as ot,c3 as ut,M as Re,u as ie,j as t,B as Q,c4 as ct,G as He,c5 as ve,b as X,c6 as Ge,X as dt,H as mt,a1 as ce,a as pt,a4 as ft,c7 as de,c8 as xt,K as bt,F as me,c9 as gt,ca as vt,b7 as ht,ab as yt,aM as St,cb as jt,cc as wt,cd as Nt}from"./index-DWnh0z-C.js";import{h as Oe}from"./moment-C5S46NFB.js";import{u as he}from"./index.esm-kKBcgjk5.js";import{M as ye,_ as Se}from"./ModalWrapper-DkE2JpU_.js";import{T as K}from"./Textbox-D8prgLMl.js";import{C as It}from"./Dialogs-DbiVKzBS.js";import{a as De,B as Te}from"./index-pGm2xic7.js";function Ke(e,r){let[s,i]=d.useState(e),u=Ee(e);return M(()=>i(u.current),[u,i,...r]),s}function Rt(e,r,s){let[i,u]=d.useState(s),n=e!==void 0,l=d.useRef(n),o=d.useRef(!1),a=d.useRef(!1);return n&&!l.current&&!o.current?(o.current=!0,l.current=n,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!n&&l.current&&!a.current&&(a.current=!0,l.current=n,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[n?e:i,g(p=>(n||u(p),r==null?void 0:r(p)))]}function Ce(e){return[e.screenX,e.screenY]}function ze(){let e=d.useRef([-1,-1]);return{wasMoved(r){let s=Ce(r);return e.current[0]===s[0]&&e.current[1]===s[1]?!1:(e.current=s,!0)},update(r){e.current=Ce(r)}}}function Ot({container:e,accept:r,walk:s,enabled:i=!0}){let u=d.useRef(r),n=d.useRef(s);d.useEffect(()=>{u.current=r,n.current=s},[r,s]),M(()=>{if(!e||!i)return;let l=$e(e);if(!l)return;let o=u.current,a=n.current,p=Object.assign(y=>o(y),{acceptNode:o}),x=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,p,!1);for(;x.nextNode();)a(x.currentNode)},[e,i,u,n])}function Dt(e){throw new Error("Unexpected object: "+e)}var D=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(D||{});function Ve(e,r){let s=r.resolveItems();if(s.length<=0)return null;let i=r.resolveActiveIndex(),u=i??-1;switch(e.focus){case 0:{for(let n=0;n<s.length;++n)if(!r.resolveDisabled(s[n],n,s))return n;return i}case 1:{for(let n=u-1;n>=0;--n)if(!r.resolveDisabled(s[n],n,s))return n;return i}case 2:{for(let n=u+1;n<s.length;++n)if(!r.resolveDisabled(s[n],n,s))return n;return i}case 3:{for(let n=s.length-1;n>=0;--n)if(!r.resolveDisabled(s[n],n,s))return n;return i}case 4:{for(let n=0;n<s.length;++n)if(r.resolveId(s[n],n,s)===e.id)return n;return i}case 5:return null;default:Dt(e)}}function We(e={},r=null,s=[]){for(let[i,u]of Object.entries(e))Ye(s,Xe(r,i),u);return s}function Xe(e,r){return e?e+"["+r+"]":r}function Ye(e,r,s){if(Array.isArray(s))for(let[i,u]of s.entries())Ye(e,Xe(r,i.toString()),u);else s instanceof Date?e.push([r,s.toISOString()]):typeof s=="boolean"?e.push([r,s?"1":"0"]):typeof s=="string"?e.push([r,s]):typeof s=="number"?e.push([r,`${s}`]):s==null?e.push([r,""]):We(s,r,e)}let Pe=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Le(e){var r,s;let i=(r=e.innerText)!=null?r:"",u=e.cloneNode(!0);if(!(u instanceof HTMLElement))return i;let n=!1;for(let o of u.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),n=!0;let l=n?(s=u.innerText)!=null?s:"":i;return Pe.test(l)&&(l=l.replace(Pe,"")),l}function Tt(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let s=e.getAttribute("aria-labelledby");if(s){let i=s.split(" ").map(u=>{let n=document.getElementById(u);if(n){let l=n.getAttribute("aria-label");return typeof l=="string"?l.trim():Le(n).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return Le(e).trim()}function Je(e){let r=d.useRef(""),s=d.useRef("");return g(()=>{let i=e.current;if(!i)return"";let u=i.innerText;if(r.current===u)return s.current;let n=Tt(i).trim().toLowerCase();return r.current=u,s.current=n,n})}var Ct=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ct||{}),Pt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Pt||{}),Lt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Lt||{}),Et=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Et||{});function pe(e,r=s=>s){let s=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,i=qe(r(e.options.slice()),n=>n.dataRef.current.domRef.current),u=s?i.indexOf(s):null;return u===-1&&(u=null),{options:i,activeOptionIndex:u}}let $t={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let r=e.activeOptionIndex,{isSelected:s}=e.dataRef.current,i=e.options.findIndex(u=>s(u.dataRef.current.value));return i!==-1&&(r=i),{...e,listboxState:0,activeOptionIndex:r}},2(e,r){var s;if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=pe(e),u=Ve(r,{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...i,searchQuery:"",activeOptionIndex:u,activationTrigger:(s=r.trigger)!=null?s:1}},3:(e,r)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let s=e.searchQuery!==""?0:1,i=e.searchQuery+r.value.toLowerCase(),u=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+s).concat(e.options.slice(0,e.activeOptionIndex+s)):e.options).find(l=>{var o;return!l.dataRef.current.disabled&&((o=l.dataRef.current.textValue)==null?void 0:o.startsWith(i))}),n=u?e.options.indexOf(u):-1;return n===-1||n===e.activeOptionIndex?{...e,searchQuery:i}:{...e,searchQuery:i,activeOptionIndex:n,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,r)=>{let s={id:r.id,dataRef:r.dataRef},i=pe(e,u=>[...u,s]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(r.dataRef.current.value)&&(i.activeOptionIndex=i.options.indexOf(s)),{...e,...i}},6:(e,r)=>{let s=pe(e,i=>{let u=i.findIndex(n=>n.id===r.id);return u!==-1&&i.splice(u,1),i});return{...e,...s,activationTrigger:1}},7:(e,r)=>({...e,labelId:r.id})},je=d.createContext(null);je.displayName="ListboxActionsContext";function Y(e){let r=d.useContext(je);if(r===null){let s=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Y),s}return r}let we=d.createContext(null);we.displayName="ListboxDataContext";function J(e){let r=d.useContext(we);if(r===null){let s=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,J),s}return r}function Ft(e,r){return B(r.type,$t,e,r)}let Mt=d.Fragment;function _t(e,r){let{value:s,defaultValue:i,form:u,name:n,onChange:l,by:o=(S,O)=>S===O,disabled:a=!1,horizontal:p=!1,multiple:x=!1,...y}=e;const N=p?"horizontal":"vertical";let I=A(r),[h=x?[]:void 0,f]=Rt(s,l,i),[b,m]=d.useReducer(Ft,{dataRef:d.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),c=d.useRef({static:!1,hold:!1}),C=d.useRef(null),P=d.useRef(null),w=d.useRef(null),T=g(typeof o=="string"?(S,O)=>{let E=o;return(S==null?void 0:S[E])===(O==null?void 0:O[E])}:o),$=d.useCallback(S=>B(R.mode,{1:()=>h.some(O=>T(O,S)),0:()=>T(h,S)}),[h]),R=d.useMemo(()=>({...b,value:h,disabled:a,mode:x?1:0,orientation:N,compare:T,isSelected:$,optionsPropsRef:c,labelRef:C,buttonRef:P,optionsRef:w}),[h,a,x,b]);M(()=>{b.dataRef.current=R},[R]),Fe([R.buttonRef,R.optionsRef],(S,O)=>{var E;m({type:1}),Me(O,_e.Loose)||(S.preventDefault(),(E=R.buttonRef.current)==null||E.focus())},R.listboxState===0);let oe=d.useMemo(()=>({open:R.listboxState===0,disabled:a,value:h}),[R,a,h]),Z=g(S=>{let O=R.options.find(E=>E.id===S);O&&ue(O.dataRef.current.value)}),ee=g(()=>{if(R.activeOptionIndex!==null){let{dataRef:S,id:O}=R.options[R.activeOptionIndex];ue(S.current.value),m({type:2,focus:D.Specific,id:O})}}),te=g(()=>m({type:0})),re=g(()=>m({type:1})),j=g((S,O,E)=>S===D.Specific?m({type:2,focus:D.Specific,id:O,trigger:E}):m({type:2,focus:S,trigger:E})),L=g((S,O)=>(m({type:5,id:S,dataRef:O}),()=>m({type:6,id:S}))),F=g(S=>(m({type:7,id:S}),()=>m({type:7,id:null}))),ue=g(S=>B(R.mode,{0(){return f==null?void 0:f(S)},1(){let O=R.value.slice(),E=O.findIndex(ne=>T(ne,S));return E===-1?O.push(S):O.splice(E,1),f==null?void 0:f(O)}})),et=g(S=>m({type:3,value:S})),tt=g(()=>m({type:4})),rt=d.useMemo(()=>({onChange:ue,registerOption:L,registerLabel:F,goToOption:j,closeListbox:re,openListbox:te,selectActiveOption:ee,selectOption:Z,search:et,clearSearch:tt}),[]),st={ref:I},se=d.useRef(null),nt=z();return d.useEffect(()=>{se.current&&i!==void 0&&nt.addEventListener(se.current,"reset",()=>{f==null||f(i)})},[se,f]),G.createElement(je.Provider,{value:rt},G.createElement(we.Provider,{value:R},G.createElement(Ae,{value:B(R.listboxState,{0:q.Open,1:q.Closed})},n!=null&&h!=null&&We({[n]:h}).map(([S,O],E)=>G.createElement(at,{features:lt.Hidden,ref:E===0?ne=>{var Ie;se.current=(Ie=ne==null?void 0:ne.closest("form"))!=null?Ie:null}:void 0,...it({key:S,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:u,disabled:a,name:S,value:O})})),U({ourProps:st,theirProps:y,slot:oe,defaultTag:Mt,name:"Listbox"}))))}let At="button";function Ut(e,r){var s;let i=H(),{id:u=`headlessui-listbox-button-${i}`,...n}=e,l=J("Listbox.Button"),o=Y("Listbox.Button"),a=A(l.buttonRef,r),p=z(),x=g(b=>{switch(b.key){case v.Space:case v.Enter:case v.ArrowDown:b.preventDefault(),o.openListbox(),p.nextFrame(()=>{l.value||o.goToOption(D.First)});break;case v.ArrowUp:b.preventDefault(),o.openListbox(),p.nextFrame(()=>{l.value||o.goToOption(D.Last)});break}}),y=g(b=>{switch(b.key){case v.Space:b.preventDefault();break}}),N=g(b=>{if(ke(b.currentTarget))return b.preventDefault();l.listboxState===0?(o.closeListbox(),p.nextFrame(()=>{var m;return(m=l.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})})):(b.preventDefault(),o.openListbox())}),I=Ke(()=>{if(l.labelId)return[l.labelId,u].join(" ")},[l.labelId,u]),h=d.useMemo(()=>({open:l.listboxState===0,disabled:l.disabled,value:l.value}),[l]),f={ref:a,id:u,type:Be(e,l.buttonRef),"aria-haspopup":"listbox","aria-controls":(s=l.optionsRef.current)==null?void 0:s.id,"aria-expanded":l.listboxState===0,"aria-labelledby":I,disabled:l.disabled,onKeyDown:x,onKeyUp:y,onClick:N};return U({ourProps:f,theirProps:n,slot:h,defaultTag:At,name:"Listbox.Button"})}let kt="label";function Bt(e,r){let s=H(),{id:i=`headlessui-listbox-label-${s}`,...u}=e,n=J("Listbox.Label"),l=Y("Listbox.Label"),o=A(n.labelRef,r);M(()=>l.registerLabel(i),[i]);let a=g(()=>{var x;return(x=n.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})}),p=d.useMemo(()=>({open:n.listboxState===0,disabled:n.disabled}),[n]);return U({ourProps:{ref:o,id:i,onClick:a},theirProps:u,slot:p,defaultTag:kt,name:"Listbox.Label"})}let qt="ul",Qt=ae.RenderStrategy|ae.Static;function Ht(e,r){var s;let i=H(),{id:u=`headlessui-listbox-options-${i}`,...n}=e,l=J("Listbox.Options"),o=Y("Listbox.Options"),a=A(l.optionsRef,r),p=z(),x=z(),y=Ue(),N=y!==null?(y&q.Open)===q.Open:l.listboxState===0;d.useEffect(()=>{var m;let c=l.optionsRef.current;c&&l.listboxState===0&&c!==((m=$e(c))==null?void 0:m.activeElement)&&c.focus({preventScroll:!0})},[l.listboxState,l.optionsRef]);let I=g(m=>{switch(x.dispose(),m.key){case v.Space:if(l.searchQuery!=="")return m.preventDefault(),m.stopPropagation(),o.search(m.key);case v.Enter:if(m.preventDefault(),m.stopPropagation(),l.activeOptionIndex!==null){let{dataRef:c}=l.options[l.activeOptionIndex];o.onChange(c.current.value)}l.mode===0&&(o.closeListbox(),V().nextFrame(()=>{var c;return(c=l.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})}));break;case B(l.orientation,{vertical:v.ArrowDown,horizontal:v.ArrowRight}):return m.preventDefault(),m.stopPropagation(),o.goToOption(D.Next);case B(l.orientation,{vertical:v.ArrowUp,horizontal:v.ArrowLeft}):return m.preventDefault(),m.stopPropagation(),o.goToOption(D.Previous);case v.Home:case v.PageUp:return m.preventDefault(),m.stopPropagation(),o.goToOption(D.First);case v.End:case v.PageDown:return m.preventDefault(),m.stopPropagation(),o.goToOption(D.Last);case v.Escape:return m.preventDefault(),m.stopPropagation(),o.closeListbox(),p.nextFrame(()=>{var c;return(c=l.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})});case v.Tab:m.preventDefault(),m.stopPropagation();break;default:m.key.length===1&&(o.search(m.key),x.setTimeout(()=>o.clearSearch(),350));break}}),h=Ke(()=>{var m;return(m=l.buttonRef.current)==null?void 0:m.id},[l.buttonRef.current]),f=d.useMemo(()=>({open:l.listboxState===0}),[l]),b={"aria-activedescendant":l.activeOptionIndex===null||(s=l.options[l.activeOptionIndex])==null?void 0:s.id,"aria-multiselectable":l.mode===1?!0:void 0,"aria-labelledby":h,"aria-orientation":l.orientation,id:u,onKeyDown:I,role:"listbox",tabIndex:0,ref:a};return U({ourProps:b,theirProps:n,slot:f,defaultTag:qt,features:Qt,visible:N,name:"Listbox.Options"})}let Gt="li";function Kt(e,r){let s=H(),{id:i=`headlessui-listbox-option-${s}`,disabled:u=!1,value:n,...l}=e,o=J("Listbox.Option"),a=Y("Listbox.Option"),p=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===i:!1,x=o.isSelected(n),y=d.useRef(null),N=Je(y),I=Ee({disabled:u,value:n,domRef:y,get textValue(){return N()}}),h=A(r,y);M(()=>{if(o.listboxState!==0||!p||o.activationTrigger===0)return;let T=V();return T.requestAnimationFrame(()=>{var $,R;(R=($=y.current)==null?void 0:$.scrollIntoView)==null||R.call($,{block:"nearest"})}),T.dispose},[y,p,o.listboxState,o.activationTrigger,o.activeOptionIndex]),M(()=>a.registerOption(i,I),[I,i]);let f=g(T=>{if(u)return T.preventDefault();a.onChange(n),o.mode===0&&(a.closeListbox(),V().nextFrame(()=>{var $;return($=o.buttonRef.current)==null?void 0:$.focus({preventScroll:!0})}))}),b=g(()=>{if(u)return a.goToOption(D.Nothing);a.goToOption(D.Specific,i)}),m=ze(),c=g(T=>m.update(T)),C=g(T=>{m.wasMoved(T)&&(u||p||a.goToOption(D.Specific,i,0))}),P=g(T=>{m.wasMoved(T)&&(u||p&&a.goToOption(D.Nothing))}),w=d.useMemo(()=>({active:p,selected:x,disabled:u}),[p,x,u]);return U({ourProps:{id:i,ref:h,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":x,disabled:void 0,onClick:f,onFocus:b,onPointerEnter:c,onMouseEnter:c,onPointerMove:C,onMouseMove:C,onPointerLeave:P,onMouseLeave:P},theirProps:l,slot:w,defaultTag:Gt,name:"Listbox.Option"})}let zt=_(_t),Vt=_(Ut),Wt=_(Bt),Xt=_(Ht),Yt=_(Kt),k=Object.assign(zt,{Button:Vt,Label:Wt,Options:Xt,Option:Yt});var Jt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Jt||{}),Zt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Zt||{}),er=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(er||{});function fe(e,r=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,i=qe(r(e.items.slice()),n=>n.dataRef.current.domRef.current),u=s?i.indexOf(s):null;return u===-1&&(u=null),{items:i,activeItemIndex:u}}let tr={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,r)=>{var s;let i=fe(e),u=Ve(r,{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...i,searchQuery:"",activeItemIndex:u,activationTrigger:(s=r.trigger)!=null?s:1}},3:(e,r)=>{let s=e.searchQuery!==""?0:1,i=e.searchQuery+r.value.toLowerCase(),u=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(l=>{var o;return((o=l.dataRef.current.textValue)==null?void 0:o.startsWith(i))&&!l.dataRef.current.disabled}),n=u?e.items.indexOf(u):-1;return n===-1||n===e.activeItemIndex?{...e,searchQuery:i}:{...e,searchQuery:i,activeItemIndex:n,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,r)=>{let s=fe(e,i=>[...i,{id:r.id,dataRef:r.dataRef}]);return{...e,...s}},6:(e,r)=>{let s=fe(e,i=>{let u=i.findIndex(n=>n.id===r.id);return u!==-1&&i.splice(u,1),i});return{...e,...s,activationTrigger:1}}},Ne=d.createContext(null);Ne.displayName="MenuContext";function le(e){let r=d.useContext(Ne);if(r===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,le),s}return r}function rr(e,r){return B(r.type,tr,e,r)}let sr=d.Fragment;function nr(e,r){let{__demoMode:s=!1,...i}=e,u=d.useReducer(rr,{__demoMode:s,menuState:s?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:n,itemsRef:l,buttonRef:o},a]=u,p=A(r);Fe([o,l],(I,h)=>{var f;a({type:1}),Me(h,_e.Loose)||(I.preventDefault(),(f=o.current)==null||f.focus())},n===0);let x=g(()=>{a({type:1})}),y=d.useMemo(()=>({open:n===0,close:x}),[n,x]),N={ref:p};return G.createElement(Ne.Provider,{value:u},G.createElement(Ae,{value:B(n,{0:q.Open,1:q.Closed})},U({ourProps:N,theirProps:i,slot:y,defaultTag:sr,name:"Menu"})))}let ar="button";function ir(e,r){var s;let i=H(),{id:u=`headlessui-menu-button-${i}`,...n}=e,[l,o]=le("Menu.Button"),a=A(l.buttonRef,r),p=z(),x=g(f=>{switch(f.key){case v.Space:case v.Enter:case v.ArrowDown:f.preventDefault(),f.stopPropagation(),o({type:0}),p.nextFrame(()=>o({type:2,focus:D.First}));break;case v.ArrowUp:f.preventDefault(),f.stopPropagation(),o({type:0}),p.nextFrame(()=>o({type:2,focus:D.Last}));break}}),y=g(f=>{switch(f.key){case v.Space:f.preventDefault();break}}),N=g(f=>{if(ke(f.currentTarget))return f.preventDefault();e.disabled||(l.menuState===0?(o({type:1}),p.nextFrame(()=>{var b;return(b=l.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})})):(f.preventDefault(),o({type:0})))}),I=d.useMemo(()=>({open:l.menuState===0}),[l]),h={ref:a,id:u,type:Be(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(s=l.itemsRef.current)==null?void 0:s.id,"aria-expanded":l.menuState===0,onKeyDown:x,onKeyUp:y,onClick:N};return U({ourProps:h,theirProps:n,slot:I,defaultTag:ar,name:"Menu.Button"})}let lr="div",or=ae.RenderStrategy|ae.Static;function ur(e,r){var s,i;let u=H(),{id:n=`headlessui-menu-items-${u}`,...l}=e,[o,a]=le("Menu.Items"),p=A(o.itemsRef,r),x=ot(o.itemsRef),y=z(),N=Ue(),I=N!==null?(N&q.Open)===q.Open:o.menuState===0;d.useEffect(()=>{let c=o.itemsRef.current;c&&o.menuState===0&&c!==(x==null?void 0:x.activeElement)&&c.focus({preventScroll:!0})},[o.menuState,o.itemsRef,x]),Ot({container:o.itemsRef.current,enabled:o.menuState===0,accept(c){return c.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});let h=g(c=>{var C,P;switch(y.dispose(),c.key){case v.Space:if(o.searchQuery!=="")return c.preventDefault(),c.stopPropagation(),a({type:3,value:c.key});case v.Enter:if(c.preventDefault(),c.stopPropagation(),a({type:1}),o.activeItemIndex!==null){let{dataRef:w}=o.items[o.activeItemIndex];(P=(C=w.current)==null?void 0:C.domRef.current)==null||P.click()}Qe(o.buttonRef.current);break;case v.ArrowDown:return c.preventDefault(),c.stopPropagation(),a({type:2,focus:D.Next});case v.ArrowUp:return c.preventDefault(),c.stopPropagation(),a({type:2,focus:D.Previous});case v.Home:case v.PageUp:return c.preventDefault(),c.stopPropagation(),a({type:2,focus:D.First});case v.End:case v.PageDown:return c.preventDefault(),c.stopPropagation(),a({type:2,focus:D.Last});case v.Escape:c.preventDefault(),c.stopPropagation(),a({type:1}),V().nextFrame(()=>{var w;return(w=o.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})});break;case v.Tab:c.preventDefault(),c.stopPropagation(),a({type:1}),V().nextFrame(()=>{ut(o.buttonRef.current,c.shiftKey?Re.Previous:Re.Next)});break;default:c.key.length===1&&(a({type:3,value:c.key}),y.setTimeout(()=>a({type:4}),350));break}}),f=g(c=>{switch(c.key){case v.Space:c.preventDefault();break}}),b=d.useMemo(()=>({open:o.menuState===0}),[o]),m={"aria-activedescendant":o.activeItemIndex===null||(s=o.items[o.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(i=o.buttonRef.current)==null?void 0:i.id,id:n,onKeyDown:h,onKeyUp:f,role:"menu",tabIndex:0,ref:p};return U({ourProps:m,theirProps:l,slot:b,defaultTag:lr,features:or,visible:I,name:"Menu.Items"})}let cr=d.Fragment;function dr(e,r){let s=H(),{id:i=`headlessui-menu-item-${s}`,disabled:u=!1,...n}=e,[l,o]=le("Menu.Item"),a=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===i:!1,p=d.useRef(null),x=A(r,p);M(()=>{if(l.__demoMode||l.menuState!==0||!a||l.activationTrigger===0)return;let w=V();return w.requestAnimationFrame(()=>{var T,$;($=(T=p.current)==null?void 0:T.scrollIntoView)==null||$.call(T,{block:"nearest"})}),w.dispose},[l.__demoMode,p,a,l.menuState,l.activationTrigger,l.activeItemIndex]);let y=Je(p),N=d.useRef({disabled:u,domRef:p,get textValue(){return y()}});M(()=>{N.current.disabled=u},[N,u]),M(()=>(o({type:5,id:i,dataRef:N}),()=>o({type:6,id:i})),[N,i]);let I=g(()=>{o({type:1})}),h=g(w=>{if(u)return w.preventDefault();o({type:1}),Qe(l.buttonRef.current)}),f=g(()=>{if(u)return o({type:2,focus:D.Nothing});o({type:2,focus:D.Specific,id:i})}),b=ze(),m=g(w=>b.update(w)),c=g(w=>{b.wasMoved(w)&&(u||a||o({type:2,focus:D.Specific,id:i,trigger:0}))}),C=g(w=>{b.wasMoved(w)&&(u||a&&o({type:2,focus:D.Nothing}))}),P=d.useMemo(()=>({active:a,disabled:u,close:I}),[a,u,I]);return U({ourProps:{id:i,ref:x,role:"menuitem",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:f,onPointerEnter:m,onMouseEnter:m,onPointerMove:c,onMouseMove:c,onPointerLeave:C,onMouseLeave:C},theirProps:n,slot:P,defaultTag:cr,name:"Menu.Item"})}let mr=_(nr),pr=_(ir),fr=_(ur),xr=_(dr),W=Object.assign(mr,{Button:pr,Items:fr,Item:xr});const Ze=({open:e,setOpen:r,id:s})=>{const{register:i,handleSubmit:u,formState:{errors:n}}=he(),l=ie(),o=async a=>{const p={id:s,title:a.title,due_date:a.date,tag:a.tag};console.log(s),l(ct(p)),r(!1)};return t.jsx(t.Fragment,{children:t.jsx(ye,{open:e,setOpen:r,children:t.jsxs("form",{onSubmit:u(o),className:"",children:[t.jsx(Se.Title,{as:"h2",className:"text-base font-bold leading-6 text-gray-900 mb-4",children:"ADD SUB-TASK"}),t.jsxs("div",{className:"mt-2 flex flex-col gap-6",children:[t.jsx(K,{placeholder:"Sub-Task title",type:"text",name:"title",label:"Title",className:"w-full rounded",register:i("title",{required:"Title is required!"}),error:n.title?n.title.message:""}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(K,{placeholder:"Date",type:"date",name:"date",label:"Task Date",className:"w-full rounded",register:i("date",{required:"Date is required!"}),error:n.date?n.date.message:""}),t.jsx(K,{placeholder:"Tag",type:"text",name:"tag",label:"Tag",className:"w-full rounded",register:i("tag",{required:"Tag is required!"}),error:n.tag?n.tag.message:""})]})]}),t.jsxs("div",{className:"py-3 mt-4 flex sm:flex-row-reverse gap-4",children:[t.jsx(Q,{type:"submit",className:"bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 sm:ml-3 sm:w-auto",label:"Add Task"}),t.jsx(Q,{type:"button",className:"bg-white border text-sm font-semibold text-gray-900 sm:w-auto",onClick:()=>r(!1),label:"Cancel"})]})]})})})},{ChevronsUpDown:br,Check:gr}=He,xe=({lists:e,selected:r,setSelected:s,label:i})=>t.jsxs("div",{className:"w-full",children:[i&&t.jsx("p",{className:"text-slate-900 dark:text-gray-500",children:i}),t.jsx(k,{value:r,onChange:s,children:({open:u})=>t.jsxs("div",{className:"relative mt-1",children:[t.jsxs(k.Button,{className:"relative w-full cursor-default rounded bg-white pl-3 pr-10 text-left px-3 py-2.5 2xl:py-3 border border-gray-300 sm:text-sm",children:[t.jsx("span",{className:"block truncate",children:r}),t.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:t.jsx(br,{className:`${u?"rotate-180 text-blue-500":"text-gray-400"} h-4 w-4 transition-transform`,"aria-hidden":"true"})})]}),t.jsx(ve,{as:d.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx(k.Options,{className:"z-50 absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:e.map((n,l)=>t.jsx(k.Option,{className:({active:o})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${o?"bg-amber-100 text-amber-900":"text-gray-900"}`,value:n,children:({selected:o})=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:`block truncate ${o?"font-medium":"font-normal"}`,children:n}),o?t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600",children:t.jsx(gr,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},l))})})]})})]}),be=["TODO","IN PROGRESS","COMPLETED"],ge=["HIGH","MEDIUM","LOW"],vr=({open:e,setOpen:r,taskId:s})=>{var Z,ee,te,re;const i=ie(),{register:u,handleSubmit:n,setValue:l,formState:{errors:o},reset:a}=he(),p=X(j=>Ge(j,s)),x=X(dt),[y,N]=d.useState([]),[I,h]=d.useState(be[0]),[f,b]=d.useState(ge[2]),[m,c]=d.useState(""),[C,P]=d.useState([]),[w,T]=d.useState(!1);d.useEffect(()=>{var j;p&&(N(p.assigned_to||[]),h(p.stage||be[0]),b(p.priority||ge[2]),c(p.client_id||""),l("title",p.title||""),l("date",((j=p.taskDate)==null?void 0:j.split("T")[0])||""),l("time_alloted",p.time_alloted||""),l("description",p.description||""))},[p,l]),d.useEffect(()=>{(async()=>{try{const L=await mt("api/clients");P(L)}catch(L){console.error("Error fetching clients:",L)}})()},[]);const $=j=>{N(j.map(L=>L._id))},R=x.filter(j=>y.includes(j._id)),oe=async j=>{if(!s){alert("Task ID is missing. Please try again.");return}const L={stage:I,title:j.title,priority:f,description:j.description,assigned_to:y,client_id:m,taskDate:new Date(j.date).toISOString(),time_alloted:j.time_alloted};T(!0);try{const F=await i(ce({id:s,updatedTaskData:L}));ce.fulfilled.match(F)?(r(!1),a()):ce.rejected.match(F)&&alert(`Update failed: ${F.payload||F.error}`)}catch(F){console.error("Update error:",F),alert("Failed to update task")}finally{T(!1)}};return p?t.jsx(ye,{open:e,setOpen:r,children:t.jsxs("form",{onSubmit:n(oe),children:[t.jsx(Se.Title,{className:"text-base font-bold leading-6 text-gray-900 mb-4",children:"UPDATE TASK"}),t.jsxs("div",{className:"mt-2 flex flex-col gap-4",children:[t.jsx(xe,{label:"Select Client",lists:C.map(j=>j.name),selected:m&&((Z=C.find(j=>j._id===m))==null?void 0:Z.name)||"",setSelected:j=>{const L=C.find(F=>F.name===j);c(L?L._id:"")}}),t.jsx(K,{placeholder:"Task Title",type:"text",name:"title",label:"Task Title",className:"w-full rounded",register:u("title",{required:"Title is required"}),error:(ee=o.title)==null?void 0:ee.message}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"w-1/2",children:t.jsx(xe,{label:"Priority Level",lists:ge,selected:f,setSelected:b})}),t.jsx("div",{className:"w-1/2",children:t.jsx(xe,{label:"Task Stage",lists:be,selected:I,setSelected:h})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"w-1/2",children:t.jsx(K,{placeholder:"Date",type:"date",name:"date",label:"Task Date",className:"w-full rounded",register:u("date",{required:"Date is required"}),error:(te=o.date)==null?void 0:te.message})}),t.jsx("div",{className:"w-1/2",children:t.jsx(K,{placeholder:"Time Alloted",type:"number",name:"time_alloted",label:"Time Alloted",className:"w-full rounded",register:u("time_alloted",{valueAsNumber:!0,min:{value:0,message:"Must be a positive number"}}),error:(re=o.time_alloted)==null?void 0:re.message})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Users"}),t.jsx(k,{value:R,onChange:$,multiple:!0,children:t.jsxs("div",{className:"relative mt-1",children:[t.jsxs(k.Button,{className:"relative w-full cursor-default rounded-lg border border-gray-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",children:[t.jsx("span",{className:"block truncate",children:R.length>0?R.map(j=>j.name).join(", "):"Select users"}),t.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400",children:"▼"})]}),t.jsx(k.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:x.map(j=>t.jsx(k.Option,{value:j,className:({active:L})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${L?"bg-indigo-600 text-white":"text-gray-900"}`,children:({selected:L})=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:`block truncate ${L?"font-medium":"font-normal"}`,children:j.name||"Unnamed User"}),L&&t.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:"✓"})]})},j._id))})]})})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Description"}),t.jsx("textarea",{id:"description",placeholder:"Enter task description (optional)",className:"w-full rounded border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",...u("description")})]}),t.jsxs("div",{className:"bg-gray-50 py-4 sm:flex sm:flex-row-reverse gap-4",children:[t.jsx(Q,{label:w?"Updating...":"Update",type:"submit",className:`${w?"opacity-50 cursor-not-allowed":""} bg-green-600 px-8 text-sm font-semibold text-white hover:bg-green-700 sm:w-auto`,disabled:w}),t.jsx(Q,{type:"button",className:"bg-white px-5 text-sm font-semibold text-gray-900 sm:w-auto",onClick:()=>r(!1),label:"Cancel"})]})]})]})}):null},{FolderOpen:hr,MoreVertical:yr,Plus:Sr,Trash2:jr}=He,wr=({task:e})=>{const[r,s]=d.useState(!1),[i,u]=d.useState(!1),[n,l]=d.useState(!1),[o,a]=d.useState(null),p=pt(),x=ie(),y=()=>{o!==null&&(x(ft({id:o})),a(null),l(!1))},N=f=>{a(f),l(!0)},I=()=>{const f=(e==null?void 0:e._id)||(e==null?void 0:e.task_id);f?p(`/task/${f}`):console.error("No valid task ID available for navigation")},h=[{label:"Open Task",icon:t.jsx(hr,{className:"tm-icon mr-2","aria-hidden":"true"}),onClick:I},{label:"Edit",icon:t.jsx(Sr,{className:"tm-icon mr-2","aria-hidden":"true"}),onClick:()=>{e!=null&&e.task_id?u(!0):console.error("No task ID available for editing")}}];return t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs(W,{as:"div",className:"relative inline-block text-left",children:[t.jsx(W.Button,{className:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-gray-600",children:t.jsx(yr,{className:"tm-icon"})}),t.jsx(ve,{as:d.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:t.jsxs(W.Items,{className:"absolute right-0 z-50 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none",children:[t.jsx("div",{className:"px-1 py-1 space-y-2",children:h.map(f=>t.jsx(W.Item,{children:({active:b})=>t.jsxs("button",{onClick:f.onClick,className:`${b?"bg-blue-500 text-white":"text-gray-900"} group flex w-full items-center rounded-md px-2 py-2 text-sm`,children:[f.icon,f.label]})},f.label))}),t.jsx("div",{className:"px-1 py-1",children:t.jsx(W.Item,{children:({active:f})=>t.jsxs("button",{onClick:()=>N((e==null?void 0:e._id)||(e==null?void 0:e.task_id)),className:`${f?"bg-blue-500 text-white":"text-red-900"} group flex w-full items-center rounded-md px-2 py-2 text-sm`,children:[t.jsx(jr,{className:"tm-icon mr-2 text-red-400","aria-hidden":"true"}),"Delete"]})})})]})})]})}),i&&(e==null?void 0:e.task_id)&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:t.jsx(vr,{open:i,setOpen:u,taskId:e.task_id},e.task_id)})}),t.jsx(Ze,{open:r,setOpen:s}),t.jsx(It,{open:n,setOpen:l,onClick:y})]})},Nr=({user:e})=>t.jsx("div",{className:"px-4",children:t.jsx(de,{className:"relative",children:({open:r})=>t.jsxs(t.Fragment,{children:[t.jsx(de.Button,{className:"group inline-flex items-center outline-none",children:t.jsx("span",{children:De(e==null?void 0:e.user_name)})}),t.jsx(ve,{as:d.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:t.jsx(de.Panel,{className:"absolute left-1/2 z-10 mt-3 w-80 max-w-sm -translate-x-1/2 transform px-4 sm:px-0 ",children:t.jsxs("div",{className:"flex items-center gap-4 rounded-lg shadow-lg bg-white p-8",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full text-white flex items-center justify-center text-2xl ",children:t.jsx("span",{className:"text-center font-bold",children:De(e==null?void 0:e.user_name)})}),t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx("p",{className:"text-black text-xl font-bold",children:e==null?void 0:e.user_name}),t.jsx("span",{className:"text-blue-500",children:(e==null?void 0:e.user_role)??"email@example.com"})]})]})})})]})})}),Ir=({openStage:e,setOpenStage:r,id:s,onStatusUpdate:i})=>{const{register:u,handleSubmit:n,formState:{errors:l}}=he(),o=a=>{a.status&&(i(a.status),r(!1))};return t.jsx(t.Fragment,{children:t.jsx(ye,{open:e,setOpen:r,children:t.jsxs("form",{onSubmit:n(o),className:"",children:[t.jsx(Se.Title,{as:"h2",className:"text-base font-bold leading-6 text-gray-900 mb-4",children:"UPDATE TASK STATUS"}),t.jsx("div",{className:"mt-2 flex flex-col gap-6",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{htmlFor:"status",className:"font-semibold",children:"Status"}),t.jsxs("select",{id:"status",name:"status",className:"w-full rounded border-gray-300",...u("status",{required:"Status is required!"}),children:[t.jsx("option",{value:"",children:"Select status"}),t.jsx("option",{value:"IN PROGRESS",children:"IN PROGRESS"}),t.jsx("option",{value:"COMPLETED",children:"COMPLETED"}),t.jsx("option",{value:"TODO",children:"TODO"})]}),l.status&&t.jsx("span",{className:"text-red-600",children:l.status.message})]})}),t.jsxs("div",{className:"py-3 mt-4 flex sm:flex-row-reverse gap-4",children:[t.jsx(Q,{type:"submit",className:"bg-blue-600 text-sm font-semibold text-white hover:bg-blue-700 sm:ml-3 sm:w-auto",label:"Update Status"}),t.jsx(Q,{type:"button",className:"bg-white border text-sm font-semibold text-gray-900 sm:w-auto",onClick:()=>r(!1),label:"Cancel"})]})]})})})},Rr={HIGH:t.jsx(wt,{className:"w-4 h-4"}),MEDIUM:t.jsx(jt,{className:"w-4 h-4"}),LOW:t.jsx(St,{className:"w-4 h-4"})},$r=({taskId:e})=>{var h,f,b,m;const r=X(c=>Ge(c,e)),s=ie(),{user:i}=X(c=>c.auth),[u,n]=d.useState(!1),[l,o]=d.useState(!1),[a,p]=d.useState(r),x=X(xt);d.useEffect(()=>{r!=null&&r.task_id&&(s(bt(r.task_id)),p(r))},[s,r==null?void 0:r.task_id]);const y=async c=>{const C=(r==null?void 0:r.task_id)??(r==null?void 0:r.id)??(r==null?void 0:r._id);if(C)try{await s(Nt({id:C.toString(),data:{stage:c}})).unwrap()&&p(w=>({...w,stage:c}))}catch(P){console.error("Update failed:",P),p(w=>({...w}))}},N=c=>{switch(c==null?void 0:c.toLowerCase()){case"todo":case"to do":return"bg-gray-100 text-gray-800 border-gray-200";case"in progress":case"in_progress":return"bg-primary-100 text-primary-800 border-primary-200";case"review":return"bg-warning-100 text-warning-800 border-warning-200";case"completed":case"done":return"bg-success-100 text-success-800 border-success-200";case"blocked":return"bg-error-100 text-error-800 border-error-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=c=>{switch(c==null?void 0:c.toLowerCase()){case"high":return"text-error-600";case"medium":return"text-warning-600";case"low":return"text-success-600";default:return"text-gray-600"}};return r?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"w-full h-fit card cursor-pointer",children:[t.jsxs("div",{className:"w-full flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:me("px-2 py-1 text-xs font-medium rounded-full border",N(a==null?void 0:a.stage)),children:(a==null?void 0:a.stage)||"To Do"}),t.jsxs("div",{className:me("flex items-center gap-1 text-sm font-medium",I(a==null?void 0:a.priority)),children:[t.jsx("span",{className:"text-base",children:Rr[a==null?void 0:a.priority]}),t.jsx("span",{className:"uppercase",children:(a==null?void 0:a.priority)||"N/A"})]})]}),i&&t.jsx(wr,{task:a})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-1",children:(a==null?void 0:a.title)||"Untitled Task"}),(a==null?void 0:a.description)&&t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[t.jsxs("span",{children:["Created ",a!=null&&a.createdAt?Oe(a.createdAt).fromNow():"recently"]}),(a==null?void 0:a.due_date)&&t.jsxs("span",{className:"text-warning-600 font-medium",children:["Due ",Oe(a.due_date).fromNow()]})]}),t.jsx("div",{className:"w-full border-t border-gray-100 my-3"}),t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(gt,{className:"w-4 h-4"}),t.jsx("span",{children:((h=a==null?void 0:a.activities)==null?void 0:h.length)||0})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(vt,{className:"w-4 h-4"}),t.jsx("span",{children:((f=a==null?void 0:a.assets)==null?void 0:f.length)||0})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ht,{className:"w-4 h-4"}),t.jsxs("span",{children:["0/",(x==null?void 0:x.length)||0]})]})]}),t.jsxs("div",{className:"flex flex-row-reverse",children:[(b=a==null?void 0:a.assigned_users)==null?void 0:b.slice(0,3).map((c,C)=>{var P;return t.jsx("div",{className:me("w-8 h-8 rounded-full text-white flex items-center justify-center text-sm -mr-2 border-2 border-white",Te[C%((P=Te)==null?void 0:P.length)]),children:t.jsx(Nr,{user:c})},(c==null?void 0:c._id)||C)}),((m=a==null?void 0:a.assigned_users)==null?void 0:m.length)>3&&t.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center text-xs font-medium -mr-2 border-2 border-white",children:["+",a.assigned_users.length-3]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Q,{onClick:()=>n(!0),variant:"secondary",size:"sm",icon:yt,label:"Add Subtask",className:"flex-1"}),t.jsx(Q,{onClick:()=>o(!0),variant:"secondary",size:"sm",label:"Update Status",className:"flex-1"})]})]}),t.jsx(Ze,{open:u,setOpen:n,id:(a==null?void 0:a.task_id)??(a==null?void 0:a.id)??(a==null?void 0:a._id)}),t.jsx(Ir,{openStage:l,setOpenStage:o,id:(a==null?void 0:a.task_id)??(a==null?void 0:a.id)??(a==null?void 0:a._id),onStatusUpdate:y})]}):t.jsx("div",{className:"w-full h-fit card",children:"Task not found."})};export{$r as T};
