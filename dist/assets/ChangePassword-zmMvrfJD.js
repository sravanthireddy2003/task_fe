import{u as y,b as l,c as j,d as v,s as N,a as k,j as e,B as S,bH as C,e as f,bI as E}from"./index-CV0oviIo.js";import{u as q}from"./index.esm-D43XoWsD.js";import{P as _}from"./PasswordStrength-BdMMbWEw.js";import{T as n}from"./Textbox-vtj0IqUG.js";import{g as D}from"./index-pGm2xic7.js";const T=()=>{var m,g,x;const c=y(),o=l(j),i=l(v),p=l(N),w=k(),{register:t,handleSubmit:b,watch:h,formState:{errors:d}}=q(),u=h("newPassword",""),P=async s=>{try{console.debug("ChangePassword onSubmit payload:",s);const r={oldPassword:s.oldPassword,newPassword:s.newPassword,confirmPassword:s.confirmPassword,old_password:s.oldPassword,new_password:s.newPassword};console.debug("Dispatching changePassword with payload:",r);const a=await c(C(r)).unwrap();console.debug("changePassword result:",a),f.success((a==null?void 0:a.message)||"Password changed successfully. Please log in again."),c(E()),w("/log-in")}catch(r){console.error("changePassword error:",r);const a=(r==null?void 0:r.message)||r||"Failed to change password";f.error(a)}};return e.jsx("div",{className:"w-full min-h-screen flex items-center justify-center flex-col lg:flex-row bg-[#f3f4f6] dark:bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-[#302943] via-slate-900 to-black",children:e.jsx("div",{className:"w-full md:w-auto flex gap-0 md:gap-40 flex-col md:flex-row items-center justify-center",children:e.jsxs("div",{className:"w-full md:w-[450px] p-4 md:p-8 flex flex-col justify-center items-center bg-white dark:bg-black/20 dark:backdrop-blur-3xl rounded-3xl shadow-2xl border border-gray-200 dark:border-white/10",children:[e.jsxs("div",{className:"w-full flex-col mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-tr from-blue-600 to-indigo-500 mb-2",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ensure your account stays secure by updating your password."})]}),e.jsxs("form",{onSubmit:b(P),className:"w-full flex flex-col gap-5",children:[e.jsx(n,{label:"Old Password",placeholder:"Enter your current password",name:"oldPassword",type:"password",className:"w-full rounded-xl",register:t("oldPassword",{required:"Old password required"}),error:(m=d.oldPassword)==null?void 0:m.message}),e.jsx(n,{label:"New Password",placeholder:"Enter new password",name:"newPassword",type:"password",className:"w-full rounded-xl",register:t("newPassword",{required:"New password required"}),error:(g=d.newPassword)==null?void 0:g.message}),e.jsx(_,{password:u}),e.jsx(n,{label:"Confirm Password",placeholder:"Confirm new password",name:"confirmPassword",type:"password",className:"w-full rounded-xl",register:t("confirmPassword",{required:"Please confirm new password",validate:s=>s===u||"Passwords do not match"}),error:(x=d.confirmPassword)==null?void 0:x.message}),o==="failed"&&i&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Error:"})," ",i]}),e.jsx(S,{type:"submit",label:o==="loading"?"Updating...":"Update Password",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",disabled:o==="loading"})]}),e.jsx("div",{className:"mt-8 w-full border-t border-gray-100 dark:border-white/10 pt-4 text-center",children:e.jsx("button",{onClick:()=>{const s=D(p);w(s,{replace:!0})},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors flex items-center justify-center gap-2",children:"‚Üê Back to Dashboard"})})]})})})};export{T as default};
