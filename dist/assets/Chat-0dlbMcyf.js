import{u,b as f,r as o,H as x,e as j,j as a}from"./index-CV0oviIo.js";import{C as g,a as C,b as S,c as y}from"./ChatStates-DExE5lzb.js";import"./index-pGm2xic7.js";const I=()=>{const m=u(),{user:e}=f(s=>s.auth),[r,h]=o.useState([]),[i,l]=o.useState(null),[p,d]=o.useState(!0),n=o.useCallback(async()=>{var s;try{d(!0);const t=await x("api/projects");t!=null&&t.success?(h(t.data||[]),((s=t.data)==null?void 0:s.length)>0&&l(t.data[0]._id||t.data[0].id)):j.error("Failed to load projects")}catch(t){j.error((t==null?void 0:t.message)||"Failed to load projects")}finally{d(!1)}},[m]);if(o.useEffect(()=>{n()},[n]),p)return a.jsx(g,{});if(!r.length)return a.jsx(C,{title:"No projects found",description:"Create a project to start team collaboration",actionLabel:"Create New Project",onAction:()=>{}});const c=r.find(s=>(s._id||s.id)===i);return a.jsx(S,{title:"Team Chat",projects:r,selectedProjectId:i,onSelectProject:l,onRefresh:n,user:e,children:c?a.jsx(y,{projectId:i,projectName:c.name||c.title||"Team Chat",authToken:localStorage.getItem("tm_access_token"),currentUserId:(e==null?void 0:e._id)||(e==null?void 0:e.id),currentUserName:e==null?void 0:e.name,projectDescription:c.description,teamSize:c.teamSize||c.membersCount||0}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(MessageCircle,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Select a project to start chatting"})]})})})};export{I as default};
