import{b as f,r as c,H as p,i as j,j as a}from"./index-DOgJOjDG.js";import{C as g,a as x,b as u,c as S}from"./ChatStates-CiqP_VpF.js";import"./index-pGm2xic7.js";const N=()=>{const{user:t}=f(e=>e.auth),[o,m]=c.useState([]),[r,l]=c.useState(null),[h,d]=c.useState(!0),n=c.useCallback(async()=>{try{d(!0);const e=await p("api/projects?manager_id="+(t==null?void 0:t.id));if(e!=null&&e.success){const s=e.data||[];m(s),s.length>0&&l(s[0]._id||s[0].id)}else j.error("Failed to load projects")}catch(e){console.error("Error fetching projects:",e),j.error((e==null?void 0:e.message)||"Failed to load projects")}finally{d(!1)}},[t==null?void 0:t.id]);if(c.useEffect(()=>{t!=null&&t.id&&n()},[t==null?void 0:t.id,n]),h)return a.jsx(g,{});if(!o.length)return a.jsx(x,{title:"No projects found",description:"Create a project to start team collaboration"});const i=o.find(e=>(e._id||e.id)===r);return a.jsx(u,{title:"Team Chat",projects:o,selectedProjectId:r,onSelectProject:l,onRefresh:n,user:t,children:i?a.jsx(S,{projectId:r,projectName:i.name||i.title,authToken:localStorage.getItem("tm_access_token"),currentUserId:(t==null?void 0:t._id)||(t==null?void 0:t.id),currentUserName:t==null?void 0:t.name}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(MessageCircle,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Select a project to start chatting"})]})})})};export{N as default};
