import{r as o,k as me,R as D,l as ae,m as fe,U as W,I as re,y as B,n as Y,C as K,o as G,p as F,q as M,t as U,O as se,N as H,w as he,x as P,z as $,M as k,A as ge,T as be,j as e,D as je,u as ve,F as J,G as le,H as q,J as ye,e as Ne,K as we,P as ne,B as Te}from"./index-CV0oviIo.js";import{h as Se}from"./moment-C5S46NFB.js";import{P as Ie,T as Ee,a as Ae}from"./index-pGm2xic7.js";import{r as te}from"./fileHelpers-B8PrZ_Ea.js";function Pe({onFocus:s}){let[r,i]=o.useState(!0),n=me();return r?D.createElement(ae,{as:"button",type:"button",features:fe.Focusable,onFocus:a=>{a.preventDefault();let d,m=50;function h(){if(m--<=0){d&&cancelAnimationFrame(d);return}if(s()){if(cancelAnimationFrame(d),!n.current)return;i(!1);return}d=requestAnimationFrame(h)}d=requestAnimationFrame(h)}}):null}const ie=o.createContext(null);function ke(){return{groups:new Map,get(s,r){var i;let n=this.groups.get(s);n||(n=new Map,this.groups.set(s,n));let a=(i=n.get(r))!=null?i:0;n.set(r,a+1);let d=Array.from(n.keys()).indexOf(r);function m(){let h=n.get(r);h>1?n.set(r,h-1):n.delete(r)}return[d,m]}}}function Ce({children:s}){let r=o.useRef(ke());return o.createElement(ie.Provider,{value:r},s)}function ce(s){let r=o.useContext(ie);if(!r)throw new Error("You must wrap your component in a <StableCollection>");let i=_e(),[n,a]=r.current.get(s,i);return o.useEffect(()=>a,[]),n}function _e(){var s,r,i;let n=(i=(r=(s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:s.ReactCurrentOwner)==null?void 0:r.current)!=null?i:null;if(!n)return Symbol();let a=[],d=n;for(;d;)a.push(d.index),d=d.return;return"$."+a.join(".")}var Fe=(s=>(s[s.Forwards=0]="Forwards",s[s.Backwards=1]="Backwards",s))(Fe||{}),$e=(s=>(s[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s))($e||{}),De=(s=>(s[s.SetSelectedIndex=0]="SetSelectedIndex",s[s.RegisterTab=1]="RegisterTab",s[s.UnregisterTab=2]="UnregisterTab",s[s.RegisterPanel=3]="RegisterPanel",s[s.UnregisterPanel=4]="UnregisterPanel",s))(De||{});let Oe={0(s,r){var i;let n=U(s.tabs,u=>u.current),a=U(s.panels,u=>u.current),d=n.filter(u=>{var w;return!((w=u.current)!=null&&w.hasAttribute("disabled"))}),m={...s,tabs:n,panels:a};if(r.index<0||r.index>n.length-1){let u=M(Math.sign(r.index-s.selectedIndex),{[-1]:()=>1,0:()=>M(Math.sign(r.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(d.length===0)return m;let w=M(u,{0:()=>n.indexOf(d[0]),1:()=>n.indexOf(d[d.length-1])});return{...m,selectedIndex:w===-1?s.selectedIndex:w}}let h=n.slice(0,r.index),N=[...n.slice(r.index),...h].find(u=>d.includes(u));if(!N)return m;let f=(i=n.indexOf(N))!=null?i:s.selectedIndex;return f===-1&&(f=s.selectedIndex),{...m,selectedIndex:f}},1(s,r){if(s.tabs.includes(r.tab))return s;let i=s.tabs[s.selectedIndex],n=U([...s.tabs,r.tab],d=>d.current),a=s.selectedIndex;return s.info.current.isControlled||(a=n.indexOf(i),a===-1&&(a=s.selectedIndex)),{...s,tabs:n,selectedIndex:a}},2(s,r){return{...s,tabs:s.tabs.filter(i=>i!==r.tab)}},3(s,r){return s.panels.includes(r.panel)?s:{...s,panels:U([...s.panels,r.panel],i=>i.current)}},4(s,r){return{...s,panels:s.panels.filter(i=>i!==r.panel)}}},V=o.createContext(null);V.displayName="TabsDataContext";function O(s){let r=o.useContext(V);if(r===null){let i=new Error(`<${s} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,O),i}return r}let Z=o.createContext(null);Z.displayName="TabsActionsContext";function ee(s){let r=o.useContext(Z);if(r===null){let i=new Error(`<${s} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,ee),i}return r}function Re(s,r){return M(r.type,Oe,s,r)}let Le=o.Fragment;function Ue(s,r){let{defaultIndex:i=0,vertical:n=!1,manual:a=!1,onChange:d,selectedIndex:m=null,...h}=s;const N=n?"vertical":"horizontal",f=a?"manual":"auto";let u=m!==null,w=G({isControlled:u}),c=B(r),[x,p]=o.useReducer(Re,{info:w,selectedIndex:m??i,tabs:[],panels:[]}),C=o.useMemo(()=>({selectedIndex:x.selectedIndex}),[x.selectedIndex]),I=G(d||(()=>{})),v=G(x.tabs),y=o.useMemo(()=>({orientation:N,activation:f,...x}),[N,f,x]),T=F(g=>(p({type:1,tab:g}),()=>p({type:2,tab:g}))),E=F(g=>(p({type:3,panel:g}),()=>p({type:4,panel:g}))),_=F(g=>{b.current!==g&&I.current(g),u||p({type:0,index:g})}),b=G(u?s.selectedIndex:x.selectedIndex),R=o.useMemo(()=>({registerTab:T,registerPanel:E,change:_}),[]);Y(()=>{p({type:0,index:m??i})},[m]),Y(()=>{if(b.current===void 0||x.tabs.length<=0)return;let g=U(x.tabs,t=>t.current);g.some((t,l)=>x.tabs[l]!==t)&&_(g.indexOf(x.tabs[b.current]))});let L={ref:c};return D.createElement(Ce,null,D.createElement(Z.Provider,{value:R},D.createElement(V.Provider,{value:y},y.tabs.length<=0&&D.createElement(Pe,{onFocus:()=>{var g,t;for(let l of v.current)if(((g=l.current)==null?void 0:g.tabIndex)===0)return(t=l.current)==null||t.focus(),!0;return!1}}),K({ourProps:L,theirProps:h,slot:C,defaultTag:Le,name:"Tabs"}))))}let Me="div";function We(s,r){let{orientation:i,selectedIndex:n}=O("Tab.List"),a=B(r);return K({ourProps:{ref:a,role:"tablist","aria-orientation":i},theirProps:s,slot:{selectedIndex:n},defaultTag:Me,name:"Tabs.List"})}let Be="button";function Ke(s,r){var i,n;let a=re(),{id:d=`headlessui-tabs-tab-${a}`,...m}=s,{orientation:h,activation:N,selectedIndex:f,tabs:u,panels:w}=O("Tab"),c=ee("Tab"),x=O("Tab"),p=o.useRef(null),C=B(p,r);Y(()=>c.registerTab(p),[c,p]);let I=ce("tabs"),v=u.indexOf(p);v===-1&&(v=I);let y=v===f,T=F(t=>{var l;let S=t();if(S===H.Success&&N==="auto"){let j=(l=he(p))==null?void 0:l.activeElement,A=x.tabs.findIndex(pe=>pe.current===j);A!==-1&&c.change(A)}return S}),E=F(t=>{let l=u.map(S=>S.current).filter(Boolean);if(t.key===P.Space||t.key===P.Enter){t.preventDefault(),t.stopPropagation(),c.change(v);return}switch(t.key){case P.Home:case P.PageUp:return t.preventDefault(),t.stopPropagation(),T(()=>$(l,k.First));case P.End:case P.PageDown:return t.preventDefault(),t.stopPropagation(),T(()=>$(l,k.Last))}if(T(()=>M(h,{vertical(){return t.key===P.ArrowUp?$(l,k.Previous|k.WrapAround):t.key===P.ArrowDown?$(l,k.Next|k.WrapAround):H.Error},horizontal(){return t.key===P.ArrowLeft?$(l,k.Previous|k.WrapAround):t.key===P.ArrowRight?$(l,k.Next|k.WrapAround):H.Error}}))===H.Success)return t.preventDefault()}),_=o.useRef(!1),b=F(()=>{var t;_.current||(_.current=!0,(t=p.current)==null||t.focus({preventScroll:!0}),c.change(v),ge(()=>{_.current=!1}))}),R=F(t=>{t.preventDefault()}),L=o.useMemo(()=>{var t;return{selected:y,disabled:(t=s.disabled)!=null?t:!1}},[y,s.disabled]),g={ref:C,onKeyDown:E,onMouseDown:R,onClick:b,id:d,role:"tab",type:be(s,p),"aria-controls":(n=(i=w[v])==null?void 0:i.current)==null?void 0:n.id,"aria-selected":y,tabIndex:y?0:-1};return K({ourProps:g,theirProps:m,slot:L,defaultTag:Be,name:"Tabs.Tab"})}let Ge="div";function He(s,r){let{selectedIndex:i}=O("Tab.Panels"),n=B(r),a=o.useMemo(()=>({selectedIndex:i}),[i]);return K({ourProps:{ref:n},theirProps:s,slot:a,defaultTag:Ge,name:"Tabs.Panels"})}let qe="div",ze=se.RenderStrategy|se.Static;function Ye(s,r){var i,n,a,d;let m=re(),{id:h=`headlessui-tabs-panel-${m}`,tabIndex:N=0,...f}=s,{selectedIndex:u,tabs:w,panels:c}=O("Tab.Panel"),x=ee("Tab.Panel"),p=o.useRef(null),C=B(p,r);Y(()=>x.registerPanel(p),[x,p,h]);let I=ce("panels"),v=c.indexOf(p);v===-1&&(v=I);let y=v===u,T=o.useMemo(()=>({selected:y}),[y]),E={ref:C,id:h,role:"tabpanel","aria-labelledby":(n=(i=w[v])==null?void 0:i.current)==null?void 0:n.id,tabIndex:y?N:-1};return!y&&((a=f.unmount)==null||a)&&!((d=f.static)!=null&&d)?D.createElement(ae,{as:"span","aria-hidden":"true",...E}):K({ourProps:E,theirProps:f,slot:T,defaultTag:qe,features:ze,visible:y,name:"Tabs.Panel"})}let Je=W(Ke),Xe=W(Ue),Qe=W(We),Ve=W(He),Ze=W(Ye),z=Object.assign(Je,{Group:Xe,List:Qe,Panels:Ve,Panel:Ze});function es(...s){return s.filter(Boolean).join(" ")}function ss({tabs:s,setSelected:r,children:i}){return e.jsx("div",{className:"w-full px-1 sm:px-0",children:e.jsxs(z.Group,{children:[e.jsx(z.List,{className:"flex space-x-6 rounded-xl p-1",children:s.map((n,a)=>e.jsxs(z,{onClick:()=>r(a),className:({selected:d})=>es("w-fit flex items-center outline-none gap-2 px-3 py-2.5 text-base font-medium leading-5 bg-white",d?"text-blue-700  border-b-2 border-blue-600":"text-gray-800  hover:text-blue-800"),children:[n.icon,e.jsx("span",{children:n.title})]},n.title))}),e.jsx(z.Panels,{className:"w-full mt-2",children:i})]})})}const oe=()=>e.jsxs("div",{className:"dots-container",children:[e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"}),e.jsx("div",{className:"dot"})]}),{AlertOctagon:ts,ListChecks:de,ThumbsUp:as,User:ue,ArrowDown:rs,ArrowUp:ls,ChevronUp:ns,CheckCheck:is,MessageCircle:cs,Activity:xe}=le,{Clock:os}=le,X=["https://images.pexels.com/photos/2418664/pexels-photo-2418664.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2","https://images.pexels.com/photos/8797307/pexels-photo-8797307.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"],ds={high:e.jsx(ns,{className:"tm-icon"}),medium:e.jsx(ls,{className:"tm-icon"}),low:e.jsx(rs,{className:"tm-icon"})},us={high:"bg-red-200",medium:"bg-yellow-200",low:"bg-blue-200"},xs=[{title:"Task Detail",icon:e.jsx(de,{className:"tm-icon"})},{title:"Activities/Timeline",icon:e.jsx(xe,{className:"tm-icon"})}],ps={commented:e.jsxs("div",{className:"w-10 h-10 rounded-full bg-gray-500 flex items-center justify-center text-white",children:[e.jsx(cs,{}),","]}),started:e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white",children:e.jsx(as,{className:"tm-icon"})}),assigned:e.jsx("div",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-500 text-white",children:e.jsx(ue,{className:"tm-icon"})}),bug:e.jsx("div",{className:"text-red-600",children:e.jsx(ts,{className:"tm-icon"})}),completed:e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center text-white",children:e.jsx(is,{className:"tm-icon"})}),"in progress":e.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-violet-600 text-white",children:e.jsx(xe,{className:"tm-icon"})})},Q=["Started","Completed","In Progress","Commented","Bug","Assigned"],js=()=>{var g;const{id:s}=je(),r=ve(),[i,n]=o.useState(0),[a,d]=o.useState(null),[m,h]=o.useState(!0),[N,f]=o.useState(null),[u,w]=o.useState([]),[c,x]=o.useState(null),[p,C]=o.useState(null),[I,v]=o.useState(null),[y,T]=o.useState(""),[E,_]=o.useState(null),b=s;if(o.useEffect(()=>{const t=async()=>{try{const l=await q(`api/tasks/taskdetail/getactivity/${b}`);C(Array.isArray(l)?l:(l==null?void 0:l.data)||[])}catch(l){console.error("Error fetching task activities:",l),f("Failed to load task activities.")}};if(b){t();const l=setInterval(t,5e3);return()=>clearInterval(l)}},[b]),o.useEffect(()=>{const t=async S=>{try{const j=await q(`api/tasks/total-working-hours/${S}`);return(j==null?void 0:j.total_working_hours)??(j==null?void 0:j.total)??j}catch(j){throw console.error("Error fetching total working hours:",j),j}};(async()=>{try{if(b){const S=await t(b);x(S)}}catch(S){f(S.message)}})()},[b]),o.useEffect(()=>{b&&(async()=>{try{const l=await q(`api/uploads/getuploads/${b}`);_(Array.isArray(l)?l:(l==null?void 0:l.data)||[])}catch(l){console.error("Error fetching uploads:",l),f("Failed to load uploads.")}})()},[b]),o.useEffect(()=>{(async()=>{try{h(!0);const l=await r(ye({task_id:s})).unwrap();d(l)}catch(l){f(l.message),Ne.error("Failed to fetch task details")}finally{h(!1)}})()},[r,s]),o.useEffect(()=>{(async()=>{try{const l=await r(we(s)).unwrap();w(l)}catch{console.log("Failed to fetch task details")}})()},[r,s]),m)return e.jsx(oe,{});if(N)return e.jsxs("p",{children:["Error: ",N]});const R=t=>{v(t.target.files[0])},L=async()=>{var S;const t=(S=JSON.parse(localStorage.getItem("userInfo")))==null?void 0:S._id;if(!I){T("Please select a file before uploading.");return}if(!b||!t){T("Task ID and User ID are required.");return}const l=new FormData;l.append("file",I),l.append("taskId",b),l.append("userId",t);try{T("Uploading...");const j=await ne("api/uploads/upload",l,{headers:{}});T("File uploaded successfully");try{const A=await q(`api/uploads/getuploads/${b}`);_(Array.isArray(A)?A:(A==null?void 0:A.data)||[])}catch{}}catch(j){console.error("Error uploading file:",j),T((j==null?void 0:j.message)||"Internal Server Error")}};return e.jsxs("div",{className:"w-full flex flex-col gap-3 mb-4 overflow-y-hidden",children:[e.jsxs("h1",{className:"font-bold",children:[e.jsx("span",{className:"text-2xl text-gray-600",children:a==null?void 0:a.title})," -"," ",e.jsx("span",{className:"text-sm text-green-600",children:a==null?void 0:a.client_name})]}),e.jsx(ss,{tabs:xs,setSelected:n,children:i===0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-5 2xl:gap-8 bg-white shadow-md p-8 overflow-y-auto",children:[e.jsxs("div",{className:"w-full md:w-1/2 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:J("flex gap-1 items-center text-base font-semibold px-3 py-1 rounded-full",Ie[a==null?void 0:a.priority],us[a==null?void 0:a.priority]),children:[e.jsx("span",{className:"text-lg",children:ds[a==null?void 0:a.priority]}),e.jsxs("span",{className:"uppercase",children:[a==null?void 0:a.priority," Priority"]})]}),e.jsxs("div",{className:J("flex items-center gap-2"),children:[e.jsx("div",{className:J("w-4 h-4 rounded-full",Ee[a.stage])}),e.jsx("span",{className:"text-black uppercase",children:a==null?void 0:a.stage})]})]}),e.jsxs("p",{className:"text-gray-500",children:["Created At: ",new Date(a==null?void 0:a.createdAt).toDateString()]}),e.jsxs("div",{className:"flex items-center gap-8 p-4 border-y border-gray-200",children:[e.jsxs("div",{className:"space-x-2",children:[e.jsx("span",{className:"font-semibold",children:"Time-Alotted :"}),e.jsx("span",{children:a==null?void 0:a.time_alloted})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("span",{className:"font-semibold",children:"Sub-Task :"}),e.jsx("span",{children:u==null?void 0:u.length})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("span",{className:"font-semibold",children:"Time-Taken :"}),e.jsx("span",{children:c})]})]}),e.jsxs("div",{className:"space-y-4 py-6",children:[e.jsx("p",{className:"text-gray-600 font-semibold test-sm",children:"TASK TEAM"}),e.jsx("div",{className:"space-y-3",children:(g=a==null?void 0:a.assigned_users)==null?void 0:g.map((t,l)=>e.jsxs("div",{className:"flex gap-4 py-2 items-center border-t border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-full text-white flex items-center justify-center text-sm -mr-1 bg-blue-600",children:e.jsx("span",{className:"text-center",children:Ae(t==null?void 0:t.user_name)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:t==null?void 0:t.user_name}),e.jsx("span",{className:"text-gray-500",children:t==null?void 0:t.user_role})]})]},l))})]}),e.jsxs("div",{className:"space-y-4 py-6",children:[e.jsx("p",{className:"text-gray-500 font-semibold text-sm",children:"SUB-TASKS"}),e.jsx("div",{className:"space-y-8",children:u==null?void 0:u.map((t,l)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-violet-50-200",children:e.jsx(de,{className:"tm-icon text-violet-600"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date(t==null?void 0:t.due_date).toDateString()}),e.jsx("span",{className:"px-2 py-0.5 text-center text-sm rounded-full bg-violet-100 text-violet-700 font-semibold",children:t==null?void 0:t.tag})]}),e.jsx("p",{className:"text-gray-700",children:t==null?void 0:t.title})]})]},l))})]})]}),e.jsx("div",{className:"w-full md:w-1/2 space-y-8",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-4 text-gray-700",children:[e.jsx("p",{className:"text-lg font-semibold",children:"TASK DESCRIPTION"}),e.jsx("p",{children:(a==null?void 0:a.description)||"No description provided."})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 p-4 rounded-lg shadow-md max-w-md mx-auto mt-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-3",children:"Upload Your File"}),e.jsxs("div",{className:"flex items-center justify-between w-full space-x-4",children:[e.jsxs("label",{htmlFor:"file-input",className:"flex flex-col items-center justify-center w-2/3 h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:bg-gray-100",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-gray-400 mb-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Click to upload or drag files"})]}),e.jsx("input",{id:"file-input",type:"file",onChange:R,className:"hidden"}),e.jsx("button",{onClick:L,className:"px-5 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75",children:"Upload"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:y})]}),e.jsx("p",{className:"text-lg font-semibold",children:"ASSETS"}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-700",children:"Uploaded Files"}),e.jsx("p",{className:"text-sm text-gray-500",children:y}),E&&E.length>0?e.jsx("div",{className:"space-y-4 mt-4",children:E.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:t.file_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.file_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(t.file_size/1024).toFixed(2)," KB"]}),t.file_type.startsWith("image")&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:te(t.file_url),alt:t.file_name,className:"w-32 h-32 object-cover rounded-md"})})]}),e.jsx("a",{href:te(t.file_url),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:"Download"})]},t.id))}):e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"No files uploaded for this task."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:X==null?void 0:X.map((t,l)=>e.jsx("img",{src:t,alt:a==null?void 0:a.title,className:"w-full rounded h-28 md:h-36 2xl:h-52 cursor-pointer transition-all duration-700 hover:scale-125 hover:z-50"},l))})]})})]})}):e.jsx(ms,{activity:p,taskId:s})})]})},ms=({activity:s,taskId:r})=>{const[i,n]=o.useState(Q[0]),[a,d]=o.useState(""),[m,h]=o.useState(!1),[N,f]=o.useState(null),u=async()=>{var c;try{const x=(c=JSON.parse(localStorage.getItem("userInfo")))==null?void 0:c._id;if(!x){f("User not logged in or user ID missing.");return}h(!0),f(null);const p=await ne("api/tasks/taskdetail/Postactivity",{task_id:r,user_id:x,type:i,activity:a});d(""),n(Q[0])}catch(x){console.error("Error submitting activity:",x),f("Failed to submit activity")}finally{h(!1)}},w=({item:c})=>{var I;const[x,p]=o.useState(!1),C=()=>{p(v=>!v)};return e.jsxs("div",{className:"flex space-x-4 p-4 border rounded-lg shadow-lg transition-transform transform hover:scale-105 hover:shadow-xl cursor-pointer",onClick:C,children:[e.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:ps[c==null?void 0:c.type]}),e.jsx("div",{className:"w-full flex items-center",children:e.jsx("div",{className:"w-0.5 bg-gray-300 h-full"})})]}),e.jsxs("div",{className:"flex flex-col gap-y-1 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{className:"tm-icon"}),e.jsx("p",{className:"font-semibold",children:c==null?void 0:c.user_name})]}),e.jsxs("div",{className:"text-gray-500 space-y-2",children:[e.jsx("span",{className:"capitalize",children:c==null?void 0:c.type}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"tm-icon"}),e.jsx("span",{className:"text-sm",children:Se(c==null?void 0:c.createdAt).fromNow()})]})]}),e.jsx("div",{className:"text-gray-700",children:x?c==null?void 0:c.activity:((I=c==null?void 0:c.activity)==null?void 0:I.slice(0,30))+"..."})]}),e.jsx("div",{className:"flex flex-col items-center justify-center mt-4 gap-y-2",children:e.jsx("button",{className:"text-blue-500 hover:underline",children:x?"Less":"More..."})})]})};return e.jsxs("div",{className:"w-full flex gap-10 2xl:gap-20 min-h-screen px-10 py-8 bg-white shadow rounded-md justify-between overflow-y-auto",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h4",{className:"text-gray-600 font-semibold text-lg mb-5",children:"Activities"}),e.jsx("div",{className:"w-full",children:s==null?void 0:s.map((c,x)=>e.jsx(w,{item:c},x))})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("h4",{className:"text-gray-600 font-semibold text-lg mb-5",children:"Add Activity"}),e.jsxs("div",{className:"w-full flex flex-wrap gap-5",children:[Q.map(c=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"radio",className:"w-4 h-4",checked:i===c,onChange:()=>n(c)}),e.jsx("p",{children:c})]},c)),e.jsx("textarea",{rows:5,value:a,onChange:c=>d(c.target.value),placeholder:"Type activity details...",className:"bg-white w-full mt-10 border border-gray-300 outline-none p-4 rounded-md focus:ring-2 ring-blue-500"}),m?e.jsx(oe,{}):e.jsx(Te,{type:"button",label:"Submit",onClick:u,className:"bg-blue-600 text-white rounded"}),N&&e.jsx("p",{className:"text-red-500",children:N})]})]})]})};export{js as default};
