import{u as I,r as w,j as e,B as C,ab as $,ax as z,a6 as U,aS as W,aT as Y,aU as G,aF as B,aV as H,aW as K,aX as X,aY as q,aZ as O,e as Z,a_ as J,a$ as A,b0 as Q,b1 as D,b2 as ee,b3 as se,b4 as te,b5 as ae,a as le,R as v,b6 as re,b7 as _,b8 as E,a7 as R,b9 as P,D as ne,b as F,ba as L,bb as M,bc as oe,aE as ie,bd as de,an as ce,F as y,az as me,be as xe}from"./index-DWnh0z-C.js";import{T as ue}from"./TaskCard--JQbReV4.js";import{C as he}from"./Chart-C7NLiNO0.js";import"./moment-C5S46NFB.js";import"./index.esm-kKBcgjk5.js";import"./ModalWrapper-DkE2JpU_.js";import"./Textbox-D8prgLMl.js";import"./Dialogs-DbiVKzBS.js";import"./index-pGm2xic7.js";const pe=({client:o})=>{const c=I(),[g,n]=w.useState(!1),[h,p]=w.useState(null),[i,u]=w.useState({name:"",email:"",phone:"",position:"",department:""}),f=(o==null?void 0:o.contacts)||[],j=async t=>{t.preventDefault();try{h?(await c(H({clientId:o.id,contactId:h.id,contact:i})).unwrap(),p(null)):(await c(K({clientId:o.id,contact:i})).unwrap(),n(!1)),u({name:"",email:"",phone:"",position:"",department:""})}catch(d){console.error("Failed to save contact:",d)}},s=t=>{p(t),u({name:t.name||"",email:t.email||"",phone:t.phone||"",position:t.position||"",department:t.department||""})},m=async t=>{if(window.confirm("Are you sure you want to delete this contact?"))try{await c(q({clientId:o.id,contactId:t})).unwrap()}catch(d){console.error("Failed to delete contact:",d)}},a=async t=>{try{await c(X({clientId:o.id,contactId:t})).unwrap()}catch(d){console.error("Failed to set primary contact:",d)}},r=()=>{n(!1),p(null),u({name:"",email:"",phone:"",position:"",department:""})};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Client Contacts"}),e.jsx(C,{label:"Add Contact",icon:e.jsx($,{}),onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"})]}),(g||h)&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6 border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:h?"Edit Contact":"Add New Contact"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 icon-center",children:e.jsx(z,{className:"tm-icon"})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:t=>u({...i,name:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:i.email,onChange:t=>u({...i,email:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:i.phone,onChange:t=>u({...i,phone:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:i.position,onChange:t=>u({...i,position:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",value:i.department,onChange:t=>u({...i,department:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(C,{label:"Cancel",onClick:r,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg"}),e.jsx(C,{label:h?"Update Contact":"Add Contact",type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"})]})]})]}),e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No contacts added yet"})]}):f.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"tm-icon text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),t.isPrimary&&e.jsx(W,{className:"tm-icon text-yellow-500"})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[t.email&&e.jsx("p",{children:t.email}),t.phone&&e.jsx("p",{children:t.phone}),(t.position||t.department)&&e.jsx("p",{children:[t.position,t.department].filter(Boolean).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!t.isPrimary&&e.jsx("button",{onClick:()=>a(t.id||t._id),className:"text-yellow-500 hover:text-yellow-600 p-1 icon-center",title:"Set as primary contact",children:e.jsx(Y,{className:"tm-icon"})}),e.jsx("button",{onClick:()=>s(t),className:"text-blue-500 hover:text-blue-600 p-1 icon-center",title:"Edit contact",children:e.jsx(G,{className:"tm-icon"})}),e.jsx("button",{onClick:()=>m(t.id||t._id),className:"text-red-500 hover:text-red-600 p-1 icon-center",title:"Delete contact",children:e.jsx(B,{className:"tm-icon"})})]})]},t.id||t._id))})]})},be=({client:o})=>{const c=I(),g=w.useRef(null),[n,h]=w.useState(!1),p=(o==null?void 0:o.documents)||[],i=a=>{if(!a)return e.jsx(D,{className:"tm-icon text-gray-400"});const r=a.toLowerCase();return r.includes("pdf")?e.jsx(D,{className:"tm-icon text-red-500"}):r.includes("image")?e.jsx(ee,{className:"tm-icon text-green-500"}):r.includes("word")||r.includes("doc")?e.jsx(se,{className:"tm-icon text-blue-500"}):r.includes("excel")||r.includes("xls")?e.jsx(te,{className:"tm-icon text-green-600"}):e.jsx(D,{className:"tm-icon text-gray-400"})},u=a=>{if(!a)return"";const r=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,t)*100)/100+" "+r[t]},f=async a=>{const r=Array.from(a.target.files);if(r.length!==0){h(!0);try{for(const t of r){const d=new FormData;d.append("document",t),d.append("entityType","CLIENT"),d.append("entityId",o.id);const N=A(),l=await fetch("/api/documents/upload",{method:"POST",headers:{Authorization:`Bearer ${N}`},body:d});if(!l.ok)throw new Error(`Upload failed: ${l.status}`);const x=await l.json();await c(Q({clientId:o.id,document:{id:x.data.documentId,file_name:x.data.fileName,file_type:x.data.mimeType,file_size:x.data.fileSize,file_url:x.data.publicUrl,uploaded_at:new Date().toISOString()}})).unwrap()}}catch(t){console.error("Failed to upload document:",t),alert("Upload failed: "+t.message)}finally{h(!1),g.current&&(g.current.value="")}}},j=async a=>{try{const r=a.publicUrl||a.file_url;if(!r)return;const t=A(),d=await fetch(r,{method:"GET",headers:t?{Authorization:`Bearer ${t}`}:{}});if(!d.ok)throw new Error(`Failed to download (${d.status})`);const N=await d.blob(),l=window.URL.createObjectURL(N),x=document.createElement("a");x.href=l,x.download=a.file_name||a.fileName||"document",document.body.appendChild(x),x.click(),document.body.removeChild(x),setTimeout(()=>window.URL.revokeObjectURL(l),5e3)}catch(r){console.error("Download failed",r),alert("Download failed: "+(r.message||r))}},s=async a=>{try{const r=a.publicUrl||a.file_url;if(!r)return;const t=A(),d=await fetch(r,{method:"GET",headers:t?{Authorization:`Bearer ${t}`}:{}});if(!d.ok)throw new Error(`Failed to fetch document (${d.status})`);const N=await d.blob(),l=window.URL.createObjectURL(N);window.open(l,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(l),5e3)}catch(r){console.error("View failed",r),alert("Unable to open document: "+(r.message||r))}},m=async a=>{if(window.confirm("Are you sure you want to delete this document?"))try{await c(ae({clientId:o.id,documentId:a})).unwrap()}catch(r){console.error("Failed to delete document:",r)}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Client Documents"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("input",{type:"file",ref:g,onChange:f,multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"hidden"}),e.jsx(C,{label:n?"Uploading...":"Upload Documents",icon:e.jsx(O,{}),onClick:()=>{var a;return(a=g.current)==null?void 0:a.click()},disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50"})]})]}),e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(O,{className:"tm-icon mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg mb-2",children:"No documents uploaded yet"}),e.jsx("p",{className:"text-sm",children:'Click "Upload Documents" to add files'})]}):p.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[i(a.file_type||a.mimeType),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.file_name||a.fileName||"Unnamed Document"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Type: ",a.file_type||a.mimeType||"Unknown"]}),a.file_size&&e.jsxs("p",{children:["Size: ",u(a.file_size)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(a),className:"text-blue-500 hover:text-blue-600 p-2 icon-center",title:"View document",children:e.jsx(Z,{className:"tm-icon"})}),e.jsx("button",{onClick:()=>j(a),className:"text-green-500 hover:text-green-600 p-2 icon-center",title:"Download document",children:e.jsx(J,{className:"tm-icon"})}),e.jsx("button",{onClick:()=>m(a.id||a.documentId||a._id),className:"text-red-500 hover:text-red-600 p-2 icon-center",title:"Delete document",children:e.jsx(B,{className:"tm-icon"})})]})]},a.id||a.documentId||a._id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Supported File Types"}),e.jsx("p",{className:"text-sm text-blue-700",children:"You can upload PDF, Word documents (.doc, .docx), Excel files (.xls, .xlsx), and images (.jpg, .jpeg, .png). Maximum file size: 10MB per file."})]})]})},ge=({client:o,tasks:c})=>{const g=le(),n=c.filter(s=>s.clientId===(o==null?void 0:o.id)),h=v.useMemo(()=>[{name:"To Do",value:n.filter(s=>s.status==="todo"||s.status==="To Do").length,color:"#fbbf24"},{name:"In Progress",value:n.filter(s=>s.status==="in_progress"||s.status==="In Progress").length,color:"#3b82f6"},{name:"Review",value:n.filter(s=>s.status==="review"||s.status==="Review").length,color:"#8b5cf6"},{name:"Done",value:n.filter(s=>s.status==="done"||s.status==="Done").length,color:"#10b981"}],[n]),p=v.useMemo(()=>[...new Set(n.map(s=>s.projectName||s.project).filter(Boolean))],[n]),i=v.useMemo(()=>n.reduce((s,m)=>s+(m.hoursLogged||0),0),[n]),u=v.useMemo(()=>n.filter(s=>s.dueDate&&new Date(s.dueDate)>new Date).sort((s,m)=>new Date(s.dueDate)-new Date(m.dueDate)).slice(0,5),[n]),f=n.length>0,j=p.length>0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8 flex items-center gap-3",children:e.jsxs("button",{onClick:()=>g(-1),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 shadow-sm border border-gray-200 rounded-xl hover:bg-gray-50 hover:shadow-md transition-all duration-200 font-medium text-sm whitespace-nowrap",children:[e.jsx(re,{className:"w-4 h-4"}),"Back"]})}),e.jsxs("header",{className:"mb-12",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-3",children:[(o==null?void 0:o.name)||"Client"," Analytics"]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl leading-relaxed",children:"Comprehensive performance overview and key metrics"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:"Total Tasks",value:n.length.toString(),icon:e.jsx(ListChecks,{className:"text-blue-500"}),color:"from-blue-500 to-blue-600"},{title:"Projects",value:p.length.toString(),icon:e.jsx(Projector,{className:"text-emerald-500"}),color:"from-emerald-500 to-emerald-600"},{title:"Hours",value:`${i}h`,icon:e.jsx(Clock3,{className:"text-purple-500"}),color:"from-purple-500 to-purple-600"},{title:"Deadlines",value:u.length.toString(),icon:e.jsx(CalendarDays,{className:"text-orange-500"}),color:"from-orange-500 to-orange-600"}].map((s,m)=>e.jsx("div",{className:"group bg-white/80 backdrop-blur-sm p-6 rounded-2xl border border-white/50 shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 overflow-hidden h-full min-h-[140px] flex flex-col justify-between",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 line-clamp-1",children:s.value})]}),e.jsx("div",{className:"p-3 bg-gradient-to-br bg-white/50 rounded-xl ml-3 flex-shrink-0 group-hover:scale-110 transition-all",children:s.icon})]})},m))}),e.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-xl p-8 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-gray-100",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:["Task Status ",e.jsx(_,{className:"text-amber-500"})]})}),e.jsx("div",{className:"flex items-center justify-center h-[22rem] w-full bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border-2 border-dashed border-gray-200 overflow-hidden",children:f?e.jsx("div",{className:"w-80 h-80 flex items-center justify-center mx-auto",children:e.jsx(he,{type:"pie",data:h,height:300,options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:20}}})}):e.jsxs("div",{className:"text-center p-12",children:[e.jsx(_,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-500 mb-2",children:"No Tasks Yet"}),e.jsx("p",{className:"text-gray-400",children:"Tasks will appear here once assigned to this client"})]})})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-xl p-8 overflow-hidden lg:h-[22rem]",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-gray-100",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:["Projects ",e.jsx(E,{className:"text-emerald-500"})]})}),j?e.jsx("div",{className:"h-[18rem] overflow-y-auto custom-scrollbar pr-4 space-y-4",children:p.slice(0,6).map((s,m)=>{const a=n.filter(r=>(r.projectName||r.project)===s);return e.jsxs("div",{className:"group flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl border border-emerald-100 hover:shadow-lg transition-all cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(E,{className:"text-white text-lg"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-bold text-lg text-gray-900 line-clamp-1 mb-1",children:s}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.length," tasks"]})]}),e.jsxs("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-800 text-sm font-bold rounded-full flex-shrink-0",children:[a.filter(r=>r.status==="done").length," done"]})]},m)})}):e.jsx("div",{className:"h-[18rem] flex items-center justify-center p-12 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-500 mb-2",children:"No Projects"}),e.jsx("p",{className:"text-gray-400",children:"Assign projects to see them here"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-xl p-8 overflow-hidden lg:h-[22rem]",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-gray-100",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:["Upcoming ",e.jsx(R,{className:"text-orange-500"})]})}),u.length?e.jsx("div",{className:"h-[18rem] overflow-y-auto custom-scrollbar pr-4 space-y-4",children:u.map((s,m)=>{const a=Math.ceil((new Date(s.dueDate)-new Date)/864e5);return e.jsx("div",{className:"p-5 bg-white border border-gray-100 rounded-2xl hover:shadow-md transition-all overflow-hidden",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-bold text-xl text-gray-900 line-clamp-2 mb-2",children:s.title||s.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-1 bg-yellow-100 text-yellow-800 rounded-full font-medium",children:[e.jsx(P,{className:"w-3.5 h-3.5"}),a,"d"]}),e.jsx("span",{children:new Date(s.dueDate).toLocaleDateString()})]})]}),e.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-800 text-sm font-bold rounded-full whitespace-nowrap flex-shrink-0",children:s.status||"To Do"})]})},m)})}):e.jsx("div",{className:"h-[18rem] flex items-center justify-center p-12 bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl border-2 border-dashed border-emerald-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"w-20 h-20 text-emerald-400 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-700 mb-2",children:"All Clear! ðŸŽ‰"}),e.jsx("p",{className:"text-emerald-600 font-medium",children:"No upcoming deadlines"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-3xl border border-purple-200/50 shadow-2xl p-8 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between mb-10 pb-6 border-b border-purple-200/50",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:["Hours Summary ",e.jsx(P,{className:"text-purple-500"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-4 p-8 bg-white/70 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/50 mx-auto mb-8",children:[e.jsx("span",{className:"text-6xl font-black bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent drop-shadow-xl",children:i}),e.jsx("span",{className:"text-2xl font-bold text-gray-600 uppercase tracking-wider",children:"hours"})]}),e.jsxs("p",{className:"text-xl text-gray-700 font-semibold",children:["Across ",n.length," tasks"]})]}),f&&e.jsx("div",{className:"grid grid-cols-2 gap-6 p-8 bg-white/80 backdrop-blur-sm rounded-3xl border border-white shadow-xl",children:[{count:n.filter(s=>s.status==="todo").length,label:"To Do",color:"text-amber-600"},{count:n.filter(s=>s.status==="in_progress").length,label:"In Progress",color:"text-blue-600"},{count:n.filter(s=>s.status==="review").length,label:"Review",color:"text-purple-600"},{count:n.filter(s=>s.status==="done").length,label:"Done",color:"text-emerald-600"}].map((s,m)=>e.jsxs("div",{className:"text-center p-6 rounded-2xl bg-gradient-to-b from-white/50 hover:from-white transition-all group",children:[e.jsx("div",{className:`text-3xl font-black ${s.color} mb-3 group-hover:scale-110 transition-transform`,children:s.count}),e.jsx("div",{className:"text-lg font-bold text-gray-700 uppercase tracking-wide",children:s.label})]},m))})]})]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
      `})]})},b={OVERVIEW:"overview",CONTACTS:"contacts",DOCUMENTS:"documents",ANALYTICS:"analytics"},Se=()=>{const o=ne(),c=o.clientId||o.id||o.clientId,g=I(),[n,h]=w.useState(b.OVERVIEW),p=F(l=>l.clients),{status:i,error:u,selectedClient:f,currentClient:j}=p||{},s=f||j||((p==null?void 0:p.clients)||[]).find(l=>((l==null?void 0:l.id)||(l==null?void 0:l._id)||(l==null?void 0:l.public_id)||(l==null?void 0:l.client_id))==c),{tasks:m}=F(l=>l.tasks||{});w.useEffect(()=>{c&&g(L(c))},[c,g]);const a=m.filter(l=>(l==null?void 0:l.clientId)==c||(l==null?void 0:l.client_id)==c||(l==null?void 0:l.client)==c||(l==null?void 0:l.clientId)==((s==null?void 0:s.id)??(s==null?void 0:s._id))),r=[{_id:"1",label:"TOTAL TASK",total:a.length||0,icon:e.jsx(M,{}),bg:"bg-[#1d4ed8]",thought:"Assigned Overall"},{_id:"2",label:"COMPLETED TASK",total:a.filter(l=>l.stage==="COMPLETED").length,icon:e.jsx(oe,{}),bg:"bg-[#0f766e]",thought:"Well Done"},{_id:"3",label:"TASK IN PROGRESS",total:a.filter(l=>l.stage==="IN PROGRESS").length,icon:e.jsx(ie,{}),bg:"bg-[#f59e0b]",thought:"Progress"},{_id:"4",label:"TODOS",total:a.filter(l=>l.stage==="TODO").length,icon:e.jsx(de,{}),bg:"bg-[#be185d]",thought:"Remaining"}],t=({label:l,count:x,bg:T,icon:S,thought:k})=>e.jsxs("div",{className:"w-full h-32 bg-white p-5 shadow-md rounded-md flex items-center justify-between",children:[e.jsxs("div",{className:"h-full flex flex-1 flex-col justify-between",children:[e.jsx("p",{className:"text-base text-gray-600",children:l}),e.jsx("span",{className:"text-2xl font-semibold",children:x}),e.jsx("span",{className:"text-sm text-gray-400",children:k})]}),e.jsx("div",{className:y("w-10 h-10 rounded-full flex items-center justify-center text-white",T),children:S})]}),d=()=>{switch(n){case b.OVERVIEW:return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:r.map(({icon:l,bg:x,label:T,total:S,thought:k},V)=>e.jsx(t,{icon:l,bg:x,label:T,count:S,thought:k},V))}),e.jsx("div",{className:"w-full py-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 2xl:gap-10",children:a.map((l,x)=>e.jsx(ue,{task:l},x))})]});case b.CONTACTS:return e.jsx(pe,{client:s});case b.DOCUMENTS:return e.jsx(be,{client:s});case b.ANALYTICS:return e.jsx(ge,{client:s,tasks:m});default:return null}};if(i==="loading")return e.jsx("div",{children:"Loading..."});if(i==="failed")return e.jsxs("div",{children:["Error: ",u||"Failed to load dashboard"]});const N=()=>{c&&g(L(c))};return e.jsxs("div",{className:"h-full py-4",children:[e.jsx(ce,{title:`Client: ${(s==null?void 0:s.name)||"..."}`,subtitle:"Client workspace overview",onRefresh:N,refreshing:i==="loading",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>h(b.OVERVIEW),className:y("flex items-center gap-2 px-4 py-2 rounded-md",n===b.OVERVIEW&&"bg-blue-600 text-white"),children:[e.jsx(M,{className:"tm-icon"}),"Overview"]}),e.jsxs("button",{onClick:()=>h(b.CONTACTS),className:y("flex items-center gap-2 px-4 py-2 rounded-md",n===b.CONTACTS&&"bg-blue-600 text-white"),children:[e.jsx(me,{className:"tm-icon"}),"Contacts"]}),e.jsxs("button",{onClick:()=>h(b.DOCUMENTS),className:y("flex items-center gap-2 px-4 py-2 rounded-md",n===b.DOCUMENTS&&"bg-blue-600 text-white"),children:[e.jsx(D,{className:"tm-icon"}),"Documents"]}),e.jsxs("button",{onClick:()=>h(b.ANALYTICS),className:y("flex items-center gap-2 px-4 py-2 rounded-md",n===b.ANALYTICS&&"bg-blue-600 text-white"),children:[e.jsx(xe,{className:"tm-icon"}),"Analytics"]})]})}),d()]})};export{Se as default};
