import{u as A,b as x,cZ as $,c_ as M,c$ as D,d0 as F,r as f,i as t,j as s,an as S,G as _,d1 as L,d2 as E,d3 as U,d4 as Y}from"./index-DWnh0z-C.js";const{Bell:N,Check:T,CheckCheck:H,Trash2:I,AlertCircle:B,RefreshCw:G,Filter:J,Clock:P}=_;function z(){const o=A(),c=x($),j=x(M),i=x(D),l=x(F),[r,m]=f.useState("all"),[b,d]=f.useState(!1),n=j==="loading";f.useEffect(()=>{i&&t.error((i==null?void 0:i.message)||String(i))},[i]);const w=async e=>{try{await o(L(e)).unwrap(),t.success("Marked as read")}catch(a){t.error((a==null?void 0:a.message)||"Failed to mark as read")}},v=async()=>{if(l===0){t.info("All notifications are already read");return}try{d(!0),await o(E()).unwrap(),t.success("All notifications marked as read")}catch(e){t.error((e==null?void 0:e.message)||"Failed to mark all as read")}finally{d(!1)}},k=async e=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await o(U(e)).unwrap(),t.success("Notification deleted")}catch(a){t.error((a==null?void 0:a.message)||"Failed to delete notification")}},C=async()=>{try{d(!0),await o(Y()).unwrap(),t.success("Notifications refreshed")}catch(e){t.error((e==null?void 0:e.message)||"Failed to refresh notifications")}finally{d(!1)}},u=c.filter(e=>{const a=e.read||e.isRead||e.is_read===1;return r==="unread"?!a:r==="read"?a:!0}),R=e=>{if(!e)return"-";const a=new Date(e),h=new Date-a,g=Math.floor(h/6e4),p=Math.floor(h/36e5),y=Math.floor(h/864e5);return g<1?"Just now":g<60?`${g}m ago`:p<24?`${p}h ago`:y<7?`${y}d ago`:a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return s.jsxs("div",{className:"p-8",children:[s.jsx(S,{title:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(N,{className:"w-6 h-6 text-blue-600"}),"Notifications"]}),subtitle:l>0?`You have ${l} unread notification${l!==1?"s":""}`:"All notifications read",onRefresh:C,refreshing:b||n,children:s.jsx("div",{className:"flex items-center gap-3",children:l>0&&s.jsxs("button",{onClick:v,disabled:b||n,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[s.jsx(H,{className:"w-4 h-4"}),"Mark All as Read"]})})}),n&&s.jsxs("div",{className:"flex items-center justify-center p-4 mb-6 bg-blue-50 rounded-lg",children:[s.jsx(G,{className:"w-5 h-5 mr-2 animate-spin text-blue-600"}),s.jsx("span",{className:"text-blue-600 font-medium",children:"Loading notifications..."})]}),s.jsxs("div",{className:"bg-white rounded-xl border p-4 mb-6 flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Filter:"})]}),s.jsxs("button",{onClick:()=>m("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",c.length,")"]}),s.jsxs("button",{onClick:()=>m("unread"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="unread"?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Unread (",l,")"]}),s.jsxs("button",{onClick:()=>m("read"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="read"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Read (",c.filter(e=>e.read||e.isRead).length,")"]})]}),!n&&c.length===0&&s.jsxs("div",{className:"bg-white rounded-xl border p-12 text-center",children:[s.jsx(N,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Notifications"}),s.jsx("p",{className:"text-gray-600",children:"You're all caught up!"})]}),!n&&c.length>0&&u.length===0&&s.jsxs("div",{className:"bg-white rounded-xl border p-12 text-center",children:[s.jsx(B,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["No ",r," Notifications"]}),s.jsx("p",{className:"text-gray-600",children:r==="unread"?"You don't have any unread notifications":"You don't have any read notifications"})]}),!n&&u.length>0&&s.jsx("div",{className:"space-y-3",children:u.map(e=>{const a=e.read||e.isRead||e.is_read===1;return s.jsx("div",{className:`border rounded-xl p-4 transition-all ${a?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200 shadow-sm"}`,children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full mt-1.5 flex-shrink-0 ${a?"bg-gray-400":"bg-blue-600"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`font-semibold text-gray-900 ${a?"":"font-bold"}`,children:e.title||e.subject||"Notification"}),e.message&&s.jsx("p",{className:"text-gray-700 text-sm mt-1 line-clamp-2",children:e.message||e.body}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.type&&s.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-200 text-gray-700",children:e.type}),e.priority&&s.jsx("span",{className:`px-2 py-1 rounded-full ${e.priority==="high"?"bg-red-100 text-red-700":e.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:e.priority.toUpperCase()}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(P,{className:"w-3 h-3"}),R(e.createdAt||e.created_at)]})]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!a&&s.jsx("button",{onClick:()=>w(e.id||e._id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Mark as read",children:s.jsx(T,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(e.id||e._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete notification",children:s.jsx(I,{className:"tm-icon"})})]})]})},e.id||e._id)})})]})}export{z as default};
