import{u as M,a as q,b as u,s as A,c as F,d as R,r as l,j as s,L as _,E as B,e as D,B as Z,f as C}from"./index-DiCoRx4R.js";import{u as O}from"./index.esm-Cj1Qfi2w.js";import{T as N}from"./Textbox-cyjLHX8O.js";import{g as U}from"./index-pGm2xic7.js";const z="/assets/task1-D_vv3cbB.png",G=()=>{var w,j;const y=M(),i=q(),n=u(A),c=u(F),x=u(R),[d,k]=l.useState(!1),[h,b]=l.useState(!1),{register:f,handleSubmit:S,setValue:m,formState:{errors:p}}=O();l.useEffect(()=>{const a=localStorage.getItem("loginEmail"),t=localStorage.getItem("loginPassword"),r=localStorage.getItem("rememberMe")==="true";a&&(m("email",a),b(r)),t&&r&&m("password",t)},[m]);const E=async a=>{var t,r,v;try{h?(localStorage.setItem("loginEmail",a.email),localStorage.setItem("loginPassword",a.password),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("loginPassword"),localStorage.setItem("rememberMe","false"));const e=await y(C(a)).unwrap(),P=(e==null?void 0:e.requires2fa)||(e==null?void 0:e.requires_2fa)||!1,g=((e==null?void 0:e.message)||"").toString().toLowerCase(),T=(e==null?void 0:e.tempToken)||(e==null?void 0:e.temp_token)||null,o=(e==null?void 0:e.user)||((t=e==null?void 0:e.data)==null?void 0:t.user)||null,I=o&&(o.twoFactorEnabled||o.twoFaEnabled||o.is2faEnabled||o.twoFA),L=!!(e!=null&&e.accessToken||e!=null&&e.token||(r=e==null?void 0:e.data)!=null&&r.accessToken||(v=e==null?void 0:e.data)!=null&&v.token);if(P||g.includes("otp")||g.includes("two-factor")||g.includes("2fa")||I&&!L){i("/verify-otp",{state:{tempToken:T,email:a.email}});return}}catch{}};return l.useEffect(()=>{if(n){const a=U(n);i(a,{replace:!0})}},[n,i]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center px-4",children:s.jsx("div",{className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[s.jsxs("div",{className:"p-12 md:p-14",children:[s.jsxs("div",{className:"mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Welcome back"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Sign in to continue to Task Manager Pro"})]}),s.jsxs("form",{onSubmit:S(E),className:"space-y-8",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email address"}),s.jsx(N,{type:"email",name:"email",placeholder:"korapatishwini@gmail.com",register:f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),error:(w=p.email)==null?void 0:w.message,className:"h-14 text-base rounded-xl"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Password"}),s.jsx(_,{to:"/forgot",className:"text-sm text-blue-600 font-medium hover:text-blue-800 hover:underline transition-colors",children:"Forgot password?"})]}),s.jsx(N,{type:"password",name:"password",placeholder:"••••••••",register:f("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),error:(j=p.password)==null?void 0:j.message,showPassword:d,onPasswordToggle:()=>k(!d),rightIcon:d?s.jsx(B,{className:"h-5 w-5"}):s.jsx(D,{className:"h-5 w-5"}),className:"h-14 text-base rounded-xl"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"relative",children:s.jsx("input",{type:"checkbox",id:"remember",checked:h,onChange:a=>b(a.target.checked),className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-offset-0 transition-all cursor-pointer"})}),s.jsx("label",{htmlFor:"remember",className:"text-gray-700 cursor-pointer select-none hover:text-gray-900 transition-colors",children:"Remember me"})]}),c==="failed"&&x&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm font-medium",children:x})}),s.jsx(Z,{type:"submit",label:c==="loading"?"Signing in...":"Sign in",disabled:c==="loading",className:"w-full h-14 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold text-lg rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-md"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-12 md:p-14 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"mb-10",children:s.jsx("img",{src:z,alt:"Task management illustration",className:"w-full max-w-md mb-10 drop-shadow-lg"})}),s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Secure & organized workflow"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Manage tasks efficiently with role-based access, OTP verification, and real-time tracking — all in one place."})]})]})]})})})};export{G as default};
