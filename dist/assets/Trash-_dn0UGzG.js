import{u as S,r as a,b as j,d6 as R,aK as T,d7 as i,j as e,an as E,B as o,aI as O,aG as u,d8 as _,d9 as m,da as y}from"./index-hc4IkIQj.js";import{C as H}from"./Dialogs-CPWaYGX9.js";import"./ModalWrapper-C7Y2Juyb.js";const K=()=>{const t=S(),[f,r]=a.useState(!1),[B,F]=a.useState(!1),[N,n]=a.useState(null),[c,d]=a.useState("delete"),[x,h]=a.useState(""),l=j(R),p=j(T);a.useEffect(()=>{t(i())},[t]);const g=()=>{d("deleteAll"),n("Do you want to permanently delete all clients?"),r(!0)},b=()=>{d("restoreAll"),n("Do you want to restore all clients in the trash?"),r(!0)},w=s=>{d("delete"),h(s),n("Do you want to permanently delete this client?"),r(!0)},C=s=>{h(s),d("restore"),n("Do you want to restore this client?"),r(!0)},D=async()=>{try{if(c==="delete")await t(m(x)).unwrap();else if(c==="restore")await t(y(x)).unwrap();else if(c==="deleteAll")for(const s of l)await t(m(s.id||s._id)).unwrap();else if(c==="restoreAll")for(const s of l)await t(y(s.id||s._id)).unwrap();t(i())}catch(s){console.error("Failed to perform action:",s)}},k=()=>e.jsx("thead",{className:"border-b border-gray-300",children:e.jsxs("tr",{className:"text-black  text-left",children:[e.jsx("th",{className:"py-2",children:"Client Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Phone"}),e.jsx("th",{className:"py-2",children:"Industry"}),e.jsx("th",{className:"py-2",children:"Deleted On"})]})}),A=({item:s})=>e.jsxs("tr",{className:"border-b border-gray-200 text-gray-600 hover:bg-gray-400/10",children:[e.jsx("td",{className:"py-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"w-full line-clamp-2 text-base text-black",children:(s==null?void 0:s.name)||(s==null?void 0:s.company)})})}),e.jsx("td",{className:"py-2",children:(s==null?void 0:s.email)||"N/A"}),e.jsx("td",{className:"py-2",children:(s==null?void 0:s.phone)||"N/A"}),e.jsx("td",{className:"py-2",children:(s==null?void 0:s.industry)||"N/A"}),e.jsx("td",{className:"py-2 text-sm",children:s!=null&&s.deletedAt?new Date(s.deletedAt).toDateString():"Unknown"}),e.jsxs("td",{className:"py-2 flex gap-1 justify-end",children:[e.jsx(o,{icon:e.jsx(_,{className:"text-xl text-gray-500"}),onClick:()=>C(s.id||s._id)}),e.jsx(o,{icon:e.jsx(u,{className:"text-xl text-red-600"}),onClick:()=>w(s.id||s._id)})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full md:px-1 px-0 mb-6",children:[e.jsx(E,{title:"Trashed Clients",subtitle:"Restore or permanently delete clients removed from the system",onRefresh:()=>t(i()),refreshing:p==="loading",children:e.jsxs("div",{className:"flex gap-2 md:gap-4 items-center",children:[e.jsx(o,{label:"Restore All",icon:e.jsx(O,{className:"text-lg hidden md:flex"}),className:"flex flex-row-reverse gap-1 items-center  text-black text-sm md:text-base rounded-md 2xl:py-2.5",onClick:()=>b(),disabled:l.length===0}),e.jsx(o,{label:"Delete All",icon:e.jsx(u,{className:"text-lg hidden md:flex"}),className:"flex flex-row-reverse gap-1 items-center  text-red-600 text-sm md:text-base rounded-md 2xl:py-2.5",onClick:()=>g(),disabled:l.length===0})]})}),p==="loading"?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsx("div",{className:"bg-white px-2 md:px-6 py-4 shadow-md rounded",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full mb-5",children:[e.jsx(k,{}),e.jsx("tbody",{children:l==null?void 0:l.map((s,v)=>e.jsx(A,{item:s},v))})]}),l.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No deleted clients found"})]})})]}),e.jsx(H,{open:f,setOpen:r,msg:N,setMsg:n,type:c,setType:d,onClick:()=>D()})]})};export{K as default};
