import{u as Ne,b as V,s as Se,r as d,cG as Y,j as e,cx as Pe,ae as oe,cH as W,bH as me,b1 as xe,a6 as X,cA as Ae,cI as Ee,ax as K,aB as te,a9 as ke,ca as _e,cJ as ge,i as P,ar as Re,W as De,cK as Te,cL as ee,Y as Ie,an as pe,ab as Le,cM as Me,cN as Oe,cO as Fe,ay as se,cP as We,cQ as Ve,cR as ue,e as he,cS as je,cT as Ge,aF as $e,cU as Be,cV as be,cW as Ke,cX as Je,bI as fe,cY as Qe,bJ as Ue}from"./index-7TXHU69M.js";import"./sortable.esm-8sHf0gZB.js";import{M as ze}from"./ManagerApprovalPanel-DDHzvfZ7.js";const He=()=>{var B;const x=Ne(),n=V(Se),{pendingApprovals:_,loading:f,error:i}=V(t=>t.workflow),[h,v]=d.useState(null),[G,N]=d.useState(!1),[w,R]=d.useState(null),[y,A]=d.useState(""),[ae,D]=d.useState(new Set),[re,T]=d.useState(new Set),E=((B=n==null?void 0:n.role)==null?void 0:B.toLowerCase())==="admin";d.useEffect(()=>{E&&(x(Y("ADMIN")),D(new Set),T(new Set))},[x,E]);const J=async t=>{v(t);try{const l=await x(ge({requestId:t,action:"APPROVE"})).unwrap();if(l&&l.success)D(g=>new Set([...g,t])),l.data&&l.data.newStatus==="CLOSED"&&T(g=>new Set([...g,t])),P.success(l.message||"Project closure approved successfully"),setTimeout(()=>{x(Y("ADMIN"))},1e3);else throw new Error((l==null?void 0:l.message)||"Failed to approve project closure")}catch(l){P.error((l==null?void 0:l.message)||l||"Failed to approve project closure")}finally{v(null)}},p=async()=>{if(!y.trim()){P.error("Please provide a reason for rejection");return}v(w.id);try{await x(ge({requestId:w.id,action:"REJECT",reason:y.trim()})).unwrap(),P.success("Project closure rejected"),x(Y("ADMIN")),N(!1),R(null),A("")}catch(t){P.error(t||"Failed to reject project closure")}finally{v(null)}},Q=t=>{b(t)||(R(t),A(""),N(!0))},Z=()=>{x(Y("ADMIN")),D(new Set),T(new Set)},b=t=>!!(re.has(t.id)||t.status==="CLOSED"||t.to_state==="CLOSED"),k=t=>!!(ae.has(t.id)||t.status==="APPROVED"),$=t=>b(t)?"CLOSED":k(t)?"APPROVED":t.status||"PENDING",I=t=>{switch($(t)){case"CLOSED":return"bg-blue-100 text-blue-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";default:return"bg-orange-100 text-orange-800"}};return E?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Closure Approvals"}),e.jsx("button",{onClick:Z,disabled:f,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50",children:e.jsx(Pe,{className:`w-5 h-5 ${f?"animate-spin":""}`})})]})}),e.jsxs("div",{className:"p-6",children:[i&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:i})}),f&&_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading approvals..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"w-8 h-8 mx-auto text-green-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No pending project closures"})]}):e.jsx("div",{className:"space-y-6",children:_.map(t=>{const l=b(t),g=k(t),C=$(t);return e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 p-6 border-b border-orange-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(me,{className:"w-6 h-6 text-orange-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Project Closure Request"}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${I(t)}`,children:C})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(xe,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Project"})]}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.project_name||`Project ${t.entity_id}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",t.project_public_id||t.entity_id]})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(X,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Client"})]}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.client_name||"N/A"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.client_email||""})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Productivity"})]}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.productivity_score||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total Hours: ",t.total_project_hours||"0"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:["Requested by: ",e.jsx("span",{className:"font-medium",children:t.requested_by_name||t.requestedByName||t.requested_by})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsxs("span",{children:["Requested: ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]}),e.jsx("div",{className:"flex gap-3 ml-6",children:t.project_status==="PENDING_FINAL_APPROVAL"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>J(t.id),disabled:h===t.id||l||g,className:`inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${l?"bg-blue-500 cursor-not-allowed":g?"bg-green-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 disabled:bg-green-400"}`,title:l?"Project is already closed":g?"Already approved":"Approve project closure",children:[l?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4"}),"Closed"]}):g?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4"}),"Approved"]}):h===t.id?e.jsx(oe,{className:"w-4 h-4 animate-spin"}):e.jsx(W,{className:"w-4 h-4"}),l||g?"":"Approve Closure"]}),e.jsxs("button",{onClick:()=>Q(t),disabled:h===t.id||l||g,className:`inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${l||g?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 disabled:bg-red-400"}`,title:l?"Project is closed":g?"Already approved":"Reject project closure",children:[e.jsx(K,{className:"w-4 h-4"}),l||g?"Closed":"Reject"]})]}):e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full",children:[e.jsx(W,{className:"w-4 h-4"}),C==="APPROVED"?"Approved":C]})})]})}),t.reason&&e.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Closure Reason"}),e.jsx("p",{className:"text-sm text-gray-600 bg-white p-3 rounded-lg border",children:t.reason})]}),C==="APPROVED"&&e.jsxs("div",{className:"p-6 bg-green-50 border-b border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(te,{className:"w-6 h-6 text-green-600"}),e.jsx("h4",{className:"text-lg font-semibold text-green-900",children:"Project Workflow Closed"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/60 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Approval Status"})]}),e.jsx("p",{className:"text-sm text-green-800 font-semibold",children:"Approved"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Project closure request has been approved"})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(me,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Project Status"})]}),e.jsx("p",{className:"text-sm text-blue-800 font-semibold",children:"Closed"}),e.jsx("p",{className:"text-xs text-gray-600",children:"All project tasks have been completed"})]})]})]}),t.tasks&&t.tasks.length>0&&e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-600"}),"Project Tasks (",t.tasks.length,")"]}),e.jsx("div",{className:"space-y-4",children:t.tasks.map((o,S)=>{var c,j;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:o.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o.status==="Completed"?"bg-green-100 text-green-800":o.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:o.total_duration?`${Math.round(o.total_duration/3600*100)/100}h`:"0h"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[((c=o.assignees)==null?void 0:c.length)||0," assignee",((j=o.assignees)==null?void 0:j.length)!==1?"s":""]})]})]}),o.assignees&&o.assignees.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Assigned to:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.assignees.map((L,U)=>e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:[e.jsx(X,{className:"w-3 h-3"}),L.name]},U))})]}),o.checklists&&o.checklists.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Checklists:"}),e.jsx("div",{className:"space-y-1",children:o.checklists.map((L,U)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx("span",{children:L.title||"Untitled"}),L.due_date&&e.jsxs("span",{className:"text-gray-500",children:["(Due: ",new Date(L.due_date).toLocaleDateString(),")"]})]},U))})]})]})})},o.id||o.public_id||S)})})]}),t.attachments&&t.attachments.length>0&&e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Attachments (",t.attachments.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.attachments.map((o,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:o.name||`Attachment ${S+1}`})]},S))})]}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Created: ",new Date(t.created_at).toLocaleString()]}),t.updated_at&&e.jsxs("span",{children:["Updated: ",new Date(t.updated_at).toLocaleString()]})]})})]},t.id)})})]}),G&&w&&!b(w)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reject Project Closure"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(K,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Rejection *"}),e.jsx("textarea",{value:y,onChange:t=>A(t.target.value),placeholder:"Please provide a reason for rejecting this closure request...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:p,disabled:!y.trim()||h===w.id,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg font-medium transition-colors disabled:cursor-not-allowed",children:h===w.id?"Rejecting...":"Reject Request"})]})]})]})})]}):null};function qe(){var de;const x=Ne(),n=V(s=>{var a;return(a=s.auth)==null?void 0:a.user}),_=V(Re),f=V(De),i=V(Te),[h,v]=d.useState([]),[G,N]=d.useState("table"),[w,R]=d.useState(!1),[y,A]=d.useState(null),[ae,D]=d.useState(null),[re,T]=d.useState(null),[E,J]=d.useState(""),[p,Q]=d.useState({scope:"all",status:"all",department:"all"}),[Z,b]=d.useState(!1),[k,$]=d.useState(""),[I,B]=d.useState(!1),[t,l]=d.useState(""),g=n==null?void 0:n.role,C=g==="Admin",o=g==="Manager",S={name:"",description:"",scope:"GLOBAL",triggerEvent:"TASK_REVIEW",active:!0,departmentId:"",projectId:""},[c,j]=d.useState(S),[L,U]=d.useState("");d.useEffect(()=>{C&&x(ee("ADMIN")).catch(s=>console.warn("[Workflow page] fetchQueue(ADMIN) error",s))},[x,C]),d.useEffect(()=>{o&&x(Ie()).catch(s=>console.warn("[Workflow page] fetchProjects error",s))},[x,o]);const z=()=>{R(!1),A(null),j(S)},ye=()=>{A(null),j({...S,scope:"GLOBAL",triggerEvent:"TASK_REVIEW",active:!0,departmentId:"",projectId:""}),R(!0)},le=s=>{s&&(A(s),j({name:s.name||"",description:s.description||"",scope:(s.scope||"GLOBAL").toUpperCase(),triggerEvent:s.trigger_event||s.triggerEvent||"TASK_REVIEW",active:s.active!==!1,departmentId:(s.department_id||s.departmentId||"").toString(),projectId:(s.project_id||s.projectId||"").toString()}),R(!0))},ve=s=>{s&&v(a=>a.filter(r=>r.id!==s.id))},we=async s=>{if(s&&s.preventDefault&&s.preventDefault(),!c.name.trim())return;if(y){v(m=>m.map(F=>F.id===y.id?{...F,name:c.name.trim(),description:c.description,scope:c.scope,trigger_event:c.triggerEvent,active:c.active,department_id:c.departmentId||null,project_id:c.projectId||null}:F)),z();return}const a=_.find(m=>String(m._id||m.id||m.public_id)===String(c.departmentId||"")),u=[i,...f||[]].filter(Boolean).find(m=>String(m._id||m.id||m.public_id)===String(c.projectId||"")),O={name:c.name.trim(),trigger_event:c.triggerEvent,scope:c.scope,active:c.active,department_id:c.departmentId||null,department_name:a?a.name||a.department_name:null,project_id:c.projectId||null,project_name:u?u.name||u.project_name:null,tenant_id:(n==null?void 0:n.tenant_id)||(n==null?void 0:n.tenantId)||(n==null?void 0:n.tenant)||(n==null?void 0:n.company_id)||null,created_by:(n==null?void 0:n._id)||(n==null?void 0:n.id)||(n==null?void 0:n.public_id)||(n==null?void 0:n.email)||null};v(m=>[...m,{id:Date.now(),...O,active:O.active!==!1,steps:[]}]),z()},Ce=async()=>{var s;if(!k.trim()){l("Please provide a reason for project closure");return}if(!i){l("No project selected");return}if(((s=i.status)==null?void 0:s.toUpperCase())!=="ACTIVE"){l("Only active projects can be closed. Please select an active project.");return}B(!0),l("");try{const a={projectId:i.id||i._id,projectPublicId:i.public_id||i.id||i._id,reason:k.trim(),attachments:[],notify:!0},r=await x(Ue(a)).unwrap();if((r==null?void 0:r.success)===!1||r!=null&&r.error){let u=(r==null?void 0:r.error)||(r==null?void 0:r.message)||"Failed to request project closure";typeof u=="string"&&u.includes("All tasks must be COMPLETED")&&(u="Cannot close project: All tasks must be completed first. Please ensure all project tasks are marked as completed before requesting closure."),P.error(u),l(u);return}P.success((r==null?void 0:r.message)||"Project closure request submitted successfully"),b(!1),$(""),l("")}catch(a){let r="Failed to request project closure";a!=null&&a.message&&(a.message.includes("All tasks must be COMPLETED")?r="Cannot close project: All tasks must be completed first. Please ensure all project tasks are marked as completed before requesting closure.":a.message.includes("Project must be ACTIVE")?r="Only active projects can be closed. Please select an active project.":r=a.message),P.error(r),l(r)}finally{B(!1)}},M=h.filter(s=>{var m,F;const a=s.name.toLowerCase().includes(E.toLowerCase())||(s.description||"").toLowerCase().includes(E.toLowerCase()),r=p.scope==="all"||((m=s.scope)==null?void 0:m.toLowerCase())===p.scope.toLowerCase(),u=p.status==="all"||(p.status==="active"?s.active!==!1:s.active===!1),O=p.department==="all"||((F=s.department_id||s.departmentId)==null?void 0:F.toString())===p.department;return a&&r&&u&&O}),q=(s,a)=>{Q(r=>({...r,[s]:r[s]===a?"all":a}))},ne=()=>{Q({scope:"all",status:"all",department:"all"}),J("")},ce=s=>{switch(s==null?void 0:s.toUpperCase()){case"PROJECT":return"bg-blue-100 text-blue-700 border-blue-200";case"DEPARTMENT":return"bg-purple-100 text-purple-700 border-purple-200";case"GLOBAL":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},ie=s=>s!==!1?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-600 border-gray-200",H={total:h.length,active:h.filter(s=>s.active!==!1).length,project:h.filter(s=>{var a;return((a=s.scope)==null?void 0:a.toUpperCase())==="PROJECT"}).length,department:h.filter(s=>{var a;return((a=s.scope)==null?void 0:a.toUpperCase())==="DEPARTMENT"}).length,global:h.filter(s=>{var a;return((a=s.scope)==null?void 0:a.toUpperCase())==="GLOBAL"||!s.scope}).length};return C?e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx(pe,{title:"Workflow Management",subtitle:"Design, automate, and monitor approval workflows across your organization",onRefresh:()=>{x(ee("ADMIN")).catch(s=>console.warn("[Workflow page] fetchQueue(ADMIN) error",s))},children:e.jsxs("button",{onClick:ye,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-xl font-medium flex items-center gap-2 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Le,{className:"w-5 h-5"}),"Create Workflow"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Workflows"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:H.total})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:H.active})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Project Scope"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:H.project})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Global Scope"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:H.global})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center",children:e.jsx(Fe,{className:"w-6 h-6 text-gray-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-start lg:items-center",children:[e.jsxs("div",{className:"relative w-full lg:w-96",children:[e.jsx(se,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{value:E,onChange:s=>J(s.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search workflows by name or description..."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>N("table"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${G==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(We,{className:"inline w-4 h-4 mr-2"}),"Table"]}),e.jsxs("button",{onClick:()=>N("cards"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${G==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Ve,{className:"inline w-4 h-4 mr-2"}),"Cards"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>q("scope","project"),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${p.scope==="project"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:"Project Scope"}),e.jsx("button",{onClick:()=>q("scope","department"),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${p.scope==="department"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:"Department Scope"}),e.jsx("button",{onClick:()=>q("status","active"),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${p.status==="active"?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:"Active Only"}),p.scope!=="all"||p.status!=="all"||p.department!=="all"?e.jsxs("button",{onClick:ne,className:"px-3 py-1.5 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"Clear Filters"]}):null]})]})]})}),e.jsxs("div",{className:"p-6",children:[G==="table"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Workflow"}),e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Scope"}),e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Project / Department"}),e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Last Updated"}),e.jsx("th",{className:"text-left py-4 px-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:M.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"py-12 text-center",children:[e.jsx(se,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No workflows found. Try adjusting your filters."})]})}):M.map(s=>{var a,r;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:s.description||"No description"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${ce(s.scope)}`,children:s.scope||"GLOBAL"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(ue,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-sm text-gray-700",children:((a=s.scope)==null?void 0:a.toUpperCase())==="PROJECT"?s.project_name||"Project-specific":((r=s.scope)==null?void 0:r.toUpperCase())==="DEPARTMENT"?s.department_name||"Department-specific":"Global"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${ie(s.active)}`,children:s.active!==!1?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.created_at?new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:e.jsx(he,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>{T(s),N("kanban")},className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"View Kanban",children:e.jsx(je,{className:"w-5 h-5 text-blue-600"})}),e.jsx("button",{onClick:()=>le(s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(Ge,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>ve(s),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx($e,{className:"w-5 h-5 text-red-600"})})]})})]},s.id)})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length===0?e.jsxs("div",{className:"col-span-3 py-12 text-center",children:[e.jsx(se,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No workflows match your filters"}),e.jsx("button",{onClick:ne,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Clear all filters"})]}):M.map(s=>{var a,r,u;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-500 text-sm mt-1 line-clamp-2",children:s.description||"No description provided"})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ce(s.scope)}`,children:s.scope||"GLOBAL"})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(ue,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-sm text-gray-700",children:((a=s.scope)==null?void 0:a.toUpperCase())==="PROJECT"?s.project_name||"Project-specific":((r=s.scope)==null?void 0:r.toUpperCase())==="DEPARTMENT"?s.department_name||"Department-specific":"Global"})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ie(s.active)}`,children:s.active!==!1?"Active":"Inactive"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["STEPS (",((u=s.steps)==null?void 0:u.length)||0,")"]}),e.jsx("span",{className:"text-xs text-gray-400",children:s.trigger_event||"Manual"})]}),e.jsxs("div",{className:"space-y-2",children:[(s.steps||[]).slice(0,3).map((O,m)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:m+1})}),e.jsx("span",{className:"text-sm text-gray-700",children:O.name})]},m)),(s.steps||[]).length>3&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs("span",{className:"text-xs text-gray-400",children:["+",(s.steps||[]).length-3," more steps"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>D(s),className:"text-sm text-gray-600 hover:text-gray-900 font-medium flex items-center gap-1",children:[e.jsx(he,{className:"w-4 h-4"}),"View Details"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{T(s),N("kanban")},className:"px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"}),"Kanban"]}),e.jsx("button",{onClick:()=>le(s),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Edit"})]})]})]},s.id)})}),M.length>0&&e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-100",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:M.length})," of ",e.jsx("span",{className:"font-medium",children:h.length})," workflows"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50",children:"Previous"}),e.jsx("button",{className:"px-3 py-2 rounded-lg bg-blue-600 text-white",children:"1"}),e.jsx("button",{className:"px-3 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50",children:"2"}),e.jsx("button",{className:"px-3 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50",children:"Next"})]})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex justify-center items-center z-50",children:e.jsxs("form",{onSubmit:we,className:"bg-white p-6 rounded-2xl shadow-xl w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:y?"Edit Workflow":"Create Workflow"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure scope, trigger, and ownership for this workflow"})]}),e.jsx("button",{onClick:z,type:"button",className:"text-gray-400 hover:text-gray-600",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Workflow Name *"}),e.jsx("input",{className:"w-full border border-gray-200 rounded-lg p-2.5 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c.name,onChange:s=>j(a=>({...a,name:s.target.value})),placeholder:"e.g., HR Payroll Approval",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Scope *"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c.scope,onChange:s=>j(a=>({...a,scope:s.target.value})),children:[e.jsx("option",{value:"GLOBAL",children:"Global"}),e.jsx("option",{value:"DEPARTMENT",children:"Department"}),e.jsx("option",{value:"PROJECT",children:"Project"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Trigger Event *"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c.triggerEvent,onChange:s=>j(a=>({...a,triggerEvent:s.target.value})),children:[e.jsx("option",{value:"TASK_CREATED",children:"Task Created"}),e.jsx("option",{value:"TASK_REVIEW",children:"Task Review"}),e.jsx("option",{value:"TASK_COMPLETED",children:"Task Completed"})]})]})]}),(c.scope==="DEPARTMENT"||c.scope==="PROJECT")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Department"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c.departmentId,onChange:s=>j(a=>({...a,departmentId:s.target.value})),children:[e.jsx("option",{value:"",children:"Select Department"}),_.map(s=>{const a=String(s._id||s.id||s.public_id),r=s.name||s.department_name||"Unnamed Department";return e.jsx("option",{value:a,children:r},a)})]})]}),c.scope==="PROJECT"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("select",{className:"w-full border border-gray-200 rounded-lg p-2.5 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c.projectId,onChange:s=>j(a=>({...a,projectId:s.target.value})),children:[e.jsx("option",{value:"",children:"Select Project"}),[i,...f||[]].filter(Boolean).map(s=>{const a=String(s._id||s.id||s.public_id),r=s.name||s.project_name||"Unnamed Project";return e.jsx("option",{value:a,children:r},a)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx("input",{id:"wf-active",type:"checkbox",checked:c.active,onChange:s=>j(a=>({...a,active:s.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"wf-active",className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700",children:y?"Save Changes":"Create Workflow"})]})]})}),e.jsx("div",{className:"mt-8",children:e.jsx(He,{})})]}):o?e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx(pe,{title:"Project Management",subtitle:"Request project closures and manage workflow approvals",onRefresh:()=>{x(ee("MANAGER")).catch(s=>console.warn("[Workflow page] fetchQueue(MANAGER) error",s))}})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Project Closure Requests"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Request closure for completed projects requiring admin approval"})]}),e.jsxs("button",{onClick:()=>{b(!0),l("")},disabled:I||!i,className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-3 rounded-xl font-medium flex items-center gap-2 shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200",children:[I?e.jsx(Be,{className:"w-5 h-5 animate-spin"}):e.jsx(be,{className:"w-5 h-5"}),"Request Project Closure"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Project to Close *"}),e.jsxs("select",{value:(i==null?void 0:i.id)||(i==null?void 0:i._id)||"",onChange:s=>{const a=f.find(r=>(r.id||r._id)===s.target.value);a&&x(Ke(a))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose a project..."}),f.filter(s=>{var a;return((a=s.status)==null?void 0:a.toUpperCase())==="ACTIVE"}).map(s=>e.jsxs("option",{value:s.id||s._id,children:[s.name||s.title||`Project ${s.id||s._id}`,s.status&&`(${s.status})`]},s.id||s._id))]}),f.filter(s=>{var a;return((a=s.status)==null?void 0:a.toUpperCase())==="ACTIVE"}).length===0&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No active projects available for closure. Please contact admin if you believe this is an error."})]}),i&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Selected Project:"}),e.jsx("span",{className:"text-sm text-blue-700",children:i.name||i.title})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${((de=i.status)==null?void 0:de.toUpperCase())==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.status||"Unknown Status"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Closure requests will be submitted for the selected project."})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(be,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Project closure requests will appear here once submitted"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Task Approval Queue"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review pending task completion requests from your team"})]}),e.jsx("div",{className:"p-6",children:e.jsx(ze,{})})]}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Project Closure"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(K,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"space-y-4",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Project to Close:"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:i.name||i.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Closure *"}),e.jsx("textarea",{value:k,onChange:s=>{$(s.target.value),t&&l("")},placeholder:"Provide details about why this project should be closed...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none",rows:4,required:!0})]}),t&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:t})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ce,disabled:!k.trim()||I,className:"flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 text-white rounded-lg font-medium transition-colors disabled:cursor-not-allowed",children:I?"Submitting...":"Submit Request"})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(fe,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"No project is currently selected."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please select a project first to request its closure."}),e.jsx("button",{onClick:()=>b(!1),className:"mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Close"})]})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to access workflow management."})]})})}export{qe as default};
